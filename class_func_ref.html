
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Class/Function Documentation &#8212; Spectral Python 0.21 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Class/Function Glossary" href="class_func_glossary.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="class_func_glossary.html" title="Class/Function Glossary"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Spectral Python 0.21 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="user_guide.html" accesskey="U">Spectral Python (SPy) User Guide</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="toctree-wrapper compound" id="class-func-ref">
</div>
<div class="section" id="class-function-documentation">
<h1>Class/Function Documentation<a class="headerlink" href="#class-function-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="file-i-o">
<h2>File I/O<a class="headerlink" href="#file-i-o" title="Permalink to this headline">¶</a></h2>
<div class="section" id="open-image">
<h3>open_image<a class="headerlink" href="#open-image" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.spectral.open_image">
<code class="sig-name descname">open_image</code><span class="sig-paren">(</span><em class="sig-param">file</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.spectral.open_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Locates &amp; opens the specified hyperspectral image.</p>
<p>Arguments:</p>
<blockquote>
<div><dl class="simple">
<dt>file (str):</dt><dd><p>Name of the file to open.</p>
</dd>
</dl>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>SpyFile object to access the file.</p>
</div></blockquote>
<p>Raises:</p>
<blockquote>
<div><p>IOError.</p>
</div></blockquote>
<p>This function attempts to determine the associated file type and open the
file. If the specified file is not found in the current directory, all
directories listed in the <code class="xref py py-const docutils literal notranslate"><span class="pre">SPECTRAL_DATA</span></code> environment variable will
be searched until the file is found.  If the file being opened is an ENVI
file, the <cite>file</cite> argument should be the name of the header file.</p>
</dd></dl>

</div>
<div class="section" id="imagearray">
<h3>ImageArray<a class="headerlink" href="#imagearray" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.image.ImageArray">
<em class="property">class </em><code class="sig-name descname">ImageArray</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">spyfile</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.image.ImageArray" title="Permalink to this definition">¶</a></dt>
<dd><p>ImageArray is an interface to an image loaded entirely into memory.
ImageArray objects are returned by <a class="reference internal" href="#spectral.SpyFile.load" title="spectral.SpyFile.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">spectral.SpyFile.load</span></code></a>.
This class inherits from both numpy.ndarray and Image, providing the
interfaces of both classes.</p>
</dd></dl>

</div>
<div class="section" id="spyfile">
<h3>SpyFile<a class="headerlink" href="#spyfile" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.SpyFile">
<em class="property">class </em><code class="sig-name descname">SpyFile</code><span class="sig-paren">(</span><em class="sig-param">params</em>, <em class="sig-param">metadata=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.SpyFile" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for accessing spectral image files</p>
<dl class="method">
<dt id="spectral.SpyFile.__getitem__">
<code class="sig-name descname">__getitem__</code><span class="sig-paren">(</span><em class="sig-param">args</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.SpyFile.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Subscripting operator that provides a numpy-like interface.
Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span>
</pre></div>
</div>
<p>Arguments:</p>
<blockquote>
<div><p><cite>i</cite>, <cite>j</cite>, <cite>k</cite> (int or <code class="xref py py-class docutils literal notranslate"><span class="pre">slice</span></code> object)</p>
<blockquote>
<div><p>Integer subscript indices or slice objects.</p>
</div></blockquote>
</div></blockquote>
<p>The subscript operator emulates the <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> subscript
operator, except data are read from the corresponding image file
instead of an array object in memory.  For frequent access or when
accessing a large fraction of the image data, consider calling
<a class="reference internal" href="#spectral.SpyFile.load" title="spectral.SpyFile.load"><code class="xref py py-meth docutils literal notranslate"><span class="pre">spectral.SpyFile.load</span></code></a> to load the data into an
<a class="reference internal" href="#spectral.image.ImageArray" title="spectral.image.ImageArray"><code class="xref py py-meth docutils literal notranslate"><span class="pre">spectral.image.ImageArray</span></code></a> object and using its subscript operator
instead.</p>
<p>Examples:</p>
<blockquote>
<div><p>Read the pixel at the 30th row and 51st column of the image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pixel</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="mi">29</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>
</pre></div>
</div>
<p>Read the 10th band:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">band</span> <span class="o">=</span> <span class="n">img</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">9</span><span class="p">]</span>
</pre></div>
</div>
<p>Read the first 30 bands for a square sub-region of the image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="mi">50</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> <span class="p">:</span><span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.SpyFile.__str__">
<code class="sig-name descname">__str__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spectral.SpyFile.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints basic parameters of the associated file.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.SpyFile.load">
<code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.SpyFile.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads entire image into memory in a <a class="reference internal" href="#spectral.image.ImageArray" title="spectral.image.ImageArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.image.ImageArray</span></code></a>.</p>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>dtype</cite> (numpy.dtype):</p>
<blockquote>
<div><p>An optional dtype to which the loaded array should be cast.</p>
</div></blockquote>
<p><cite>scale</cite> (bool, default True):</p>
<blockquote>
<div><p>Specifies whether any applicable scale factor should be applied
to the data after loading.</p>
</div></blockquote>
</div></blockquote>
<p><a class="reference internal" href="#spectral.image.ImageArray" title="spectral.image.ImageArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.image.ImageArray</span></code></a> is derived from both
<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.image.Image</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> so it supports the
full <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> interface.  The returns object will have
shape <cite>(M,N,B)</cite>, where <cite>M</cite>, <cite>N</cite>, and <cite>B</cite> are the numbers of rows,
columns, and bands in the image.</p>
</dd></dl>

</dd></dl>

<div class="section" id="spyfile-subclasses">
<h4>SpyFile Subclasses<a class="headerlink" href="#spyfile-subclasses" title="Permalink to this headline">¶</a></h4>
<p>SpyFile is an abstract base class.  Subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">SpyFile</span></code>
(<a class="reference internal" href="#spectral.io.bipfile.BipFile" title="spectral.io.bipfile.BipFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BipFile</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BilFile</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">BsqFile</span></code>) all implement a common set of additional
methods. <a class="reference internal" href="#spectral.io.bipfile.BipFile" title="spectral.io.bipfile.BipFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BipFile</span></code></a> is shown here but the other two are similar.</p>
<dl class="class">
<dt id="spectral.io.bipfile.BipFile">
<em class="property">class </em><code class="sig-name descname">BipFile</code><span class="sig-paren">(</span><em class="sig-param">params</em>, <em class="sig-param">metadata=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.bipfile.BipFile" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to interface image files stored with bands interleaved by pixel.</p>
<dl class="method">
<dt id="spectral.io.bipfile.BipFile.open_memmap">
<code class="sig-name descname">open_memmap</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.bipfile.BipFile.open_memmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <cite>numpy.memmap</cite> object for image file data access.</p>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>interleave</cite> (str, default ‘bip’):</p>
<blockquote>
<div><p>Specifies the shape/interleave of the returned object. Must be
one of [‘bip’, ‘bil’, ‘bsq’, ‘source’]. If not specified, the
memmap will be returned as ‘bip’. If the interleave is
‘source’, the interleave of the memmap will be the same as the
source data file. If the number of rows, columns, and bands in
the file are R, C, and B, the shape of the returned memmap
array will be as follows:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 48%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>interleave</p></th>
<th class="head"><p>array shape</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘bip’</p></td>
<td><p>(R, C, B)</p></td>
</tr>
<tr class="row-odd"><td><p>‘bil’</p></td>
<td><p>(R, B, C)</p></td>
</tr>
<tr class="row-even"><td><p>‘bsq’</p></td>
<td><p>(B, R, C)</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><cite>writable</cite> (bool, default False):</p>
<blockquote>
<div><p>If <cite>writable</cite> is True, modifying values in the returned memmap
will result in corresponding modification to the image data
file.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.io.bipfile.BipFile.read_band">
<code class="sig-name descname">read_band</code><span class="sig-paren">(</span><em class="sig-param">band</em>, <em class="sig-param">use_memmap=True</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.bipfile.BipFile.read_band" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a single band from the image.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>band</cite> (int):</p>
<blockquote>
<div><p>Index of band to read.</p>
</div></blockquote>
<p><cite>use_memmap</cite> (bool, default True):</p>
<blockquote>
<div><p>Specifies whether the file’s memmap interface should be used
to read the data. Setting this arg to True only has an effect
if a memmap is being used (i.e., if <cite>img.using_memmap</cite> is True).</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
<blockquote>
<div><p>An <cite>MxN</cite> array of values for the specified band.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.io.bipfile.BipFile.read_bands">
<code class="sig-name descname">read_bands</code><span class="sig-paren">(</span><em class="sig-param">bands</em>, <em class="sig-param">use_memmap=True</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.bipfile.BipFile.read_bands" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads multiple bands from the image.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>bands</cite> (list of ints):</p>
<blockquote>
<div><p>Indices of bands to read.</p>
</div></blockquote>
<p><cite>use_memmap</cite> (bool, default True):</p>
<blockquote>
<div><p>Specifies whether the file’s memmap interface should be used
to read the data. Setting this arg to True only has an effect
if a memmap is being used (i.e., if <cite>img.using_memmap</cite> is True).</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
<blockquote>
<div><p>An <cite>MxNxL</cite> array of values for the specified bands. <cite>M</cite> and <cite>N</cite>
are the number of rows &amp; columns in the image and <cite>L</cite> equals
len(<cite>bands</cite>).</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.io.bipfile.BipFile.read_pixel">
<code class="sig-name descname">read_pixel</code><span class="sig-paren">(</span><em class="sig-param">row</em>, <em class="sig-param">col</em>, <em class="sig-param">use_memmap=True</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.bipfile.BipFile.read_pixel" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the pixel at position (row,col) from the file.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>row</cite>, <cite>col</cite> (int):</p>
<blockquote>
<div><p>Indices of the row &amp; column for the pixel</p>
</div></blockquote>
<p><cite>use_memmap</cite> (bool, default True):</p>
<blockquote>
<div><p>Specifies whether the file’s memmap interface should be used
to read the data. Setting this arg to True only has an effect
if a memmap is being used (i.e., if <cite>img.using_memmap</cite> is True).</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
<blockquote>
<div><p>A length-<cite>B</cite> array, where <cite>B</cite> is the number of image bands.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.io.bipfile.BipFile.read_subimage">
<code class="sig-name descname">read_subimage</code><span class="sig-paren">(</span><em class="sig-param">rows</em>, <em class="sig-param">cols</em>, <em class="sig-param">bands=None</em>, <em class="sig-param">use_memmap=False</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.bipfile.BipFile.read_subimage" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads arbitrary rows, columns, and bands from the image.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>rows</cite> (list of ints):</p>
<blockquote>
<div><p>Indices of rows to read.</p>
</div></blockquote>
<p><cite>cols</cite> (list of ints):</p>
<blockquote>
<div><p>Indices of columns to read.</p>
</div></blockquote>
<p><cite>bands</cite> (list of ints):</p>
<blockquote>
<div><p>Optional list of bands to read.  If not specified, all bands
are read.</p>
</div></blockquote>
<p><cite>use_memmap</cite> (bool, default False):</p>
<blockquote>
<div><p>Specifies whether the file’s memmap interface should be used
to read the data. Setting this arg to True only has an effect
if a memmap is being used (i.e., if <cite>img.using_memmap</cite> is True).</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
<blockquote>
<div><p>An <cite>MxNxL</cite> array, where <cite>M</cite> = len(<cite>rows</cite>), <cite>N</cite> = len(<cite>cols</cite>),
and <cite>L</cite> = len(bands) (or # of image bands if <cite>bands</cite> == None).</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.io.bipfile.BipFile.read_subregion">
<code class="sig-name descname">read_subregion</code><span class="sig-paren">(</span><em class="sig-param">row_bounds</em>, <em class="sig-param">col_bounds</em>, <em class="sig-param">bands=None</em>, <em class="sig-param">use_memmap=True</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.bipfile.BipFile.read_subregion" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a contiguous rectangular sub-region from the image.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>row_bounds</cite> (2-tuple of ints):</p>
<blockquote>
<div><p>(a, b) -&gt; Rows a through b-1 will be read.</p>
</div></blockquote>
<p><cite>col_bounds</cite> (2-tuple of ints):</p>
<blockquote>
<div><p>(a, b) -&gt; Columnss a through b-1 will be read.</p>
</div></blockquote>
<p><cite>bands</cite> (list of ints):</p>
<blockquote>
<div><p>Optional list of bands to read.  If not specified, all bands
are read.</p>
</div></blockquote>
<p><cite>use_memmap</cite> (bool, default True):</p>
<blockquote>
<div><p>Specifies whether the file’s memmap interface should be used
to read the data. Setting this arg to True only has an effect
if a memmap is being used (i.e., if <cite>img.using_memmap</cite> is True).</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
<blockquote>
<div><p>An <cite>MxNxL</cite> array.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="subimage">
<h3>SubImage<a class="headerlink" href="#subimage" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.io.spyfile.SubImage">
<em class="property">class </em><code class="sig-name descname">SubImage</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">row_range</em>, <em class="sig-param">col_range</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.spyfile.SubImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a rectangular sub-region of a larger SpyFile object.</p>
<dl class="method">
<dt id="spectral.io.spyfile.SubImage.read_band">
<code class="sig-name descname">read_band</code><span class="sig-paren">(</span><em class="sig-param">band</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.spyfile.SubImage.read_band" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a single band from the image.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>band</cite> (int):</p>
<blockquote>
<div><p>Index of band to read.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
<blockquote>
<div><p>An <cite>MxN</cite> array of values for the specified band.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.io.spyfile.SubImage.read_bands">
<code class="sig-name descname">read_bands</code><span class="sig-paren">(</span><em class="sig-param">bands</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.spyfile.SubImage.read_bands" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads multiple bands from the image.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>bands</cite> (list of ints):</p>
<blockquote>
<div><p>Indices of bands to read.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
<blockquote>
<div><p>An <cite>MxNxL</cite> array of values for the specified bands. <cite>M</cite> and <cite>N</cite>
are the number of rows &amp; columns in the image and <cite>L</cite> equals
len(<cite>bands</cite>).</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.io.spyfile.SubImage.read_pixel">
<code class="sig-name descname">read_pixel</code><span class="sig-paren">(</span><em class="sig-param">row</em>, <em class="sig-param">col</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.spyfile.SubImage.read_pixel" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the pixel at position (row,col) from the file.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>row</cite>, <cite>col</cite> (int):</p>
<blockquote>
<div><p>Indices of the row &amp; column for the pixel</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
<blockquote>
<div><p>A length-<cite>B</cite> array, where <cite>B</cite> is the number of image bands.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.io.spyfile.SubImage.read_subimage">
<code class="sig-name descname">read_subimage</code><span class="sig-paren">(</span><em class="sig-param">rows</em>, <em class="sig-param">cols</em>, <em class="sig-param">bands=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.spyfile.SubImage.read_subimage" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads arbitrary rows, columns, and bands from the image.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>rows</cite> (list of ints):</p>
<blockquote>
<div><p>Indices of rows to read.</p>
</div></blockquote>
<p><cite>cols</cite> (list of ints):</p>
<blockquote>
<div><p>Indices of columns to read.</p>
</div></blockquote>
<p><cite>bands</cite> (list of ints):</p>
<blockquote>
<div><p>Optional list of bands to read.  If not specified, all bands
are read.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
<blockquote>
<div><p>An <cite>MxNxL</cite> array, where <cite>M</cite> = len(<cite>rows</cite>), <cite>N</cite> = len(<cite>cols</cite>),
and <cite>L</cite> = len(bands) (or # of image bands if <cite>bands</cite> == None).</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.io.spyfile.SubImage.read_subregion">
<code class="sig-name descname">read_subregion</code><span class="sig-paren">(</span><em class="sig-param">row_bounds</em>, <em class="sig-param">col_bounds</em>, <em class="sig-param">bands=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.spyfile.SubImage.read_subregion" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a contiguous rectangular sub-region from the image.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>row_bounds</cite> (2-tuple of ints):</p>
<blockquote>
<div><p>(a, b) -&gt; Rows a through b-1 will be read.</p>
</div></blockquote>
<p><cite>col_bounds</cite> (2-tuple of ints):</p>
<blockquote>
<div><p>(a, b) -&gt; Columnss a through b-1 will be read.</p>
</div></blockquote>
<p><cite>bands</cite> (list of ints):</p>
<blockquote>
<div><p>Optional list of bands to read.  If not specified, all bands
are read.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
<blockquote>
<div><p>An <cite>MxNxL</cite> array.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="file-formats">
<h3>File Formats<a class="headerlink" href="#file-formats" title="Permalink to this headline">¶</a></h3>
<div class="section" id="module-spectral.io.aviris">
<span id="aviris"></span><h4>AVIRIS<a class="headerlink" href="#module-spectral.io.aviris" title="Permalink to this headline">¶</a></h4>
<p>Functions for handling AVIRIS image files.</p>
<dl class="function">
<dt id="spectral.io.aviris.open">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><em class="sig-param">file</em>, <em class="sig-param">band_file=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.aviris.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a SpyFile object for an AVIRIS image file.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>file</cite> (str):</p>
<blockquote>
<div><p>Name of the AVIRIS data file.</p>
</div></blockquote>
<p><cite>band_file</cite> (str):</p>
<blockquote>
<div><p>Optional name of the AVIRIS spectral calibration file.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>A SpyFile object for the image file.</p>
</div></blockquote>
<p>Raises:</p>
<blockquote>
<div><p>spectral.io.spyfile.InvalidFileError</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="spectral.io.aviris.read_aviris_bands">
<code class="sig-name descname">read_aviris_bands</code><span class="sig-paren">(</span><em class="sig-param">cal_filename</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.aviris.read_aviris_bands" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a BandInfo object for an AVIRIS spectral calibration file.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>cal_filename</cite> (str):</p>
<blockquote>
<div><p>Name of the AVIRIS spectral calibration file.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>A <a class="reference internal" href="#spectral.BandInfo" title="spectral.BandInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.BandInfo</span></code></a> object</p>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-spectral.io.envi">
<span id="envi"></span><h4>ENVI<a class="headerlink" href="#module-spectral.io.envi" title="Permalink to this headline">¶</a></h4>
<p>ENVI <a class="footnote-reference brackets" href="#envi-trademark" id="id1">1</a> is a popular commercial software package for processing
and analyzing geospatial imagery.  SPy supports reading imagery with associated
ENVI header files and reading &amp; writing spectral libraries with ENVI headers.
ENVI files are opened automatically by the SPy <code class="xref py py-func docutils literal notranslate"><span class="pre">image</span></code> function
but can also be called explicitly.  It may be necessary to open an ENVI file
explicitly if the data file is in a separate directory from the header or if
the data file has an unusual file extension that SPy can not identify.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">spectral.io.envi</span> <span class="k">as</span> <span class="nn">envi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">envi</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;cup95eff.int.hdr&#39;</span><span class="p">,</span> <span class="s1">&#39;/Users/thomas/spectral_data/cup95eff.int&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="footnote brackets">
<dt class="label" id="envi-trademark"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>ENVI is a registered trademark of Exelis, Inc.</p>
</dd>
</dl>
<dl class="function">
<dt id="spectral.io.envi.open">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><em class="sig-param">file</em>, <em class="sig-param">image=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.envi.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens an image or spectral library with an associated ENVI HDR header file.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>file</cite> (str):</p>
<blockquote>
<div><p>Name of the header file for the image.</p>
</div></blockquote>
<p><cite>image</cite> (str):</p>
<blockquote>
<div><p>Optional name of the associated image data file.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><a class="reference internal" href="#spectral.SpyFile" title="spectral.SpyFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.SpyFile</span></code></a> or <a class="reference internal" href="#spectral.io.envi.SpectralLibrary" title="spectral.io.envi.SpectralLibrary"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.io.envi.SpectralLibrary</span></code></a>
object.</p>
</div></blockquote>
<p>Raises:</p>
<blockquote>
<div><p>TypeError, EnviDataFileNotFoundError</p>
</div></blockquote>
<p>If the specified file is not found in the current directory, all
directories listed in the SPECTRAL_DATA environment variable will be
searched until the file is found.  Based on the name of the header file,
this function will search for the image file in the same directory as the
header, looking for a file with the same name as the header but different
extension. Extensions recognized are .img, .dat, .sli, and no extension.
Capitalized versions of the file extensions are also searched.</p>
</dd></dl>

<dl class="class">
<dt id="spectral.io.envi.SpectralLibrary">
<em class="property">class </em><code class="sig-name descname">SpectralLibrary</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">header=None</em>, <em class="sig-param">params=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.envi.SpectralLibrary" title="Permalink to this definition">¶</a></dt>
<dd><p>The envi.SpectralLibrary class holds data contained in an ENVI-formatted
spectral library file (.sli files), which stores data as specified by a
corresponding .hdr header file.  The primary members of an
Envi.SpectralLibrary object are:</p>
<blockquote>
<div><p><cite>spectra</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>A subscriptable array of all spectra in the library. <cite>spectra</cite> will
have shape <cite>CxB</cite>, where <cite>C</cite> is the number of spectra in the library
and <cite>B</cite> is the number of bands for each spectrum.</p>
</div></blockquote>
<p><cite>names</cite> (list of str):</p>
<blockquote>
<div><p>A length-<cite>C</cite> list of names corresponding to the spectra.</p>
</div></blockquote>
<p><cite>bands</cite> (<a class="reference internal" href="#spectral.BandInfo" title="spectral.BandInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.BandInfo</span></code></a>):</p>
<blockquote>
<div><p>Spectral bands associated with the library spectra.</p>
</div></blockquote>
</div></blockquote>
<dl class="method">
<dt id="spectral.io.envi.SpectralLibrary.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param">file_basename</em>, <em class="sig-param">description=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.envi.SpectralLibrary.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the spectral library to a library file.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>file_basename</cite> (str):</p>
<blockquote>
<div><p>Name of the file (without extension) to save.</p>
</div></blockquote>
<p><cite>description</cite> (str):</p>
<blockquote>
<div><p>Optional text description of the library.</p>
</div></blockquote>
</div></blockquote>
<p>This method creates two files: <cite>file_basename</cite>.hdr and
<cite>file_basename</cite>.sli.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="envi-create-image">
<h3>envi.create_image<a class="headerlink" href="#envi-create-image" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.io.envi.create_image">
<code class="sig-name descname">create_image</code><span class="sig-paren">(</span><em class="sig-param">hdr_file</em>, <em class="sig-param">metadata=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.envi.create_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an image file and ENVI header with a memmep array for write access.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>hdr_file</cite> (str):</p>
<blockquote>
<div><p>Header file (with “.hdr” extension) name with path.</p>
</div></blockquote>
<p><cite>metadata</cite> (dict):</p>
<blockquote>
<div><p>Metadata to specify the image file format. The following parameters
(in ENVI header format) are required, if not specified via
corresponding keyword arguments: “bands”, “lines”, “samples”,
and “data type”.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>dtype</cite> (numpy dtype or type string):</p>
<blockquote>
<div><p>The numpy data type with which to store the image.  For example,
to store the image in 16-bit unsigned integer format, the argument
could be any of <cite>numpy.uint16</cite>, “u2”, “uint16”, or “H”. If this
keyword is given, it will override the “data type” parameter in
the <cite>metadata</cite> argument.</p>
</div></blockquote>
<p><cite>force</cite> (bool, False by default):</p>
<blockquote>
<div><p>If the associated image file or header already exist and <cite>force</cite> is
True, the files will be overwritten; otherwise, if either of the
files exist, an exception will be raised.</p>
</div></blockquote>
<p><cite>ext</cite> (str):</p>
<blockquote>
<div><p>The extension to use for the image file.  If not specified, the
default extension “.img” will be used.  If <cite>ext</cite> is an empty
string, the image file will have the same name as the header but
without the “.hdr” extension.</p>
</div></blockquote>
<p><cite>interleave</cite> (str):</p>
<blockquote>
<div><p>Must be one of “bil”, “bip”, or “bsq”. This keyword supercedes the
value of “interleave” in the metadata argument, if given. If no
interleave is specified (via keyword or <cite>metadata</cite>), “bip” is
assumed.</p>
</div></blockquote>
<p><cite>shape</cite> (tuple of integers):</p>
<blockquote>
<div><p>Specifies the number of rows, columns, and bands in the image.
This keyword should be either of the form (R, C, B) or (R, C),
where R, C, and B specify the number or rows, columns, and bands,
respectively. If B is omitted, the number of bands is assumed to
be one. If this keyword is given, its values supercede the values
of “bands”, “lines”, and “samples” if they are present in the
<cite>metadata</cite> argument.</p>
</div></blockquote>
<p><cite>offset</cite> (integer, default 0):</p>
<blockquote>
<div><p>The offset (in bytes) of image data from the beginning of the file.
This value supercedes the value of “header offset” in the metadata
argument (if given).</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><cite>SpyFile</cite> object:</p>
<blockquote>
<div><p>To access a <cite>numpy.memmap</cite> for the returned <cite>SpyFile</cite> object, call
the <cite>open_memmap</cite> method of the returned object.</p>
</div></blockquote>
</div></blockquote>
<p>Examples:</p>
<blockquote>
<div><p>Creating a new image from metadata:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">md</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;lines&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
<span class="go">          &#39;samples&#39;: 40,</span>
<span class="go">          &#39;bands&#39;: 50,</span>
<span class="go">          &#39;data type&#39;: 12}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">envi</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="s1">&#39;new_image.hdr&#39;</span><span class="p">,</span> <span class="n">md</span><span class="p">)</span>
</pre></div>
</div>
<p>Creating a new image via keywords:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">envi</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="s1">&#39;new_image2.hdr&#39;</span><span class="p">,</span>
<span class="go">                            shape=(30, 40, 50),</span>
<span class="go">                            dtype=np.uint16)</span>
</pre></div>
</div>
<p>Writing to the new image using a memmap interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Set all band values for a single pixel to 100.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mm</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">open_memmap</span><span class="p">(</span><span class="n">writable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mm</span><span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="envi-save-classification">
<h3>envi.save_classification<a class="headerlink" href="#envi-save-classification" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.io.envi.save_classification">
<code class="sig-name descname">save_classification</code><span class="sig-paren">(</span><em class="sig-param">hdr_file</em>, <em class="sig-param">image</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.envi.save_classification" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a classification image to disk.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>hdr_file</cite> (str):</p>
<blockquote>
<div><p>Header file (with “.hdr” extension) name with path.</p>
</div></blockquote>
<p><cite>image</cite> (SpyFile object or numpy.ndarray):</p>
<blockquote>
<div><p>The image to save.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>dtype</cite> (numpy dtype or type string):</p>
<blockquote>
<div><p>The numpy data type with which to store the image.  For example,
to store the image in 16-bit unsigned integer format, the argument
could be any of <cite>numpy.uint16</cite>, “u2”, “uint16”, or “H”.</p>
</div></blockquote>
<p><cite>force</cite> (bool):</p>
<blockquote>
<div><p>If the associated image file or header already exist and <cite>force</cite> is
True, the files will be overwritten; otherwise, if either of the
files exist, an exception will be raised.</p>
</div></blockquote>
<p><cite>ext</cite> (str):</p>
<blockquote>
<div><p>The extension to use for the image file.  If not specified, the
default extension “.img” will be used.  If <cite>ext</cite> is an empty
string, the image file will have the same name as the header but
without the “.hdr” extension.</p>
</div></blockquote>
<p><cite>interleave</cite> (str):</p>
<blockquote>
<div><p>The band interleave format to use in the file.  This argument
should be one of “bil”, “bip”, or “bsq”.  If not specified, the
image will be written in BIP interleave.</p>
</div></blockquote>
<p><cite>byteorder</cite> (int or string):</p>
<blockquote>
<div><p>Specifies the byte order (endian-ness) of the data as
written to disk. For little endian, this value should be
either 0 or “little”.  For big endian, it should be
either 1 or “big”. If not specified, native byte order
will be used.</p>
</div></blockquote>
<p><cite>metadata</cite> (dict):</p>
<blockquote>
<div><p>A dict containing ENVI header parameters (e.g., parameters
extracted from a source image).</p>
</div></blockquote>
<p><cite>class_names</cite> (array of strings):</p>
<blockquote>
<div><p>For classification results, specifies the names to assign each
integer in the class map being written.  If not given, default
class names are created.</p>
</div></blockquote>
<p><cite>class_colors</cite> (array of RGB-tuples):</p>
<blockquote>
<div><p>For classification results, specifies colors to assign each
integer in the class map being written.  If not given, default
colors are automatically generated.</p>
</div></blockquote>
</div></blockquote>
<p>If the source image being saved was already in ENVI format, then the
SpyFile object for that image will contain a <cite>metadata</cite> dict that can be
passed as the <cite>metadata</cite> keyword. However, care should be taken to ensure
that all the metadata fields from the source image are still accurate
(e.g., wavelengths do not apply to classification results).</p>
</dd></dl>

</div>
<div class="section" id="envi-save-image">
<h3>envi.save_image<a class="headerlink" href="#envi-save-image" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.io.envi.save_image">
<code class="sig-name descname">save_image</code><span class="sig-paren">(</span><em class="sig-param">hdr_file</em>, <em class="sig-param">image</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.envi.save_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves an image to disk.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>hdr_file</cite> (str):</p>
<blockquote>
<div><p>Header file (with “.hdr” extension) name with path.</p>
</div></blockquote>
<p><cite>image</cite> (SpyFile object or numpy.ndarray):</p>
<blockquote>
<div><p>The image to save.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>dtype</cite> (numpy dtype or type string):</p>
<blockquote>
<div><p>The numpy data type with which to store the image.  For example,
to store the image in 16-bit unsigned integer format, the argument
could be any of <cite>numpy.uint16</cite>, “u2”, “uint16”, or “H”.</p>
</div></blockquote>
<p><cite>force</cite> (bool):</p>
<blockquote>
<div><p>If the associated image file or header already exist and <cite>force</cite> is
True, the files will be overwritten; otherwise, if either of the
files exist, an exception will be raised.</p>
</div></blockquote>
<p><cite>ext</cite> (str or None):</p>
<blockquote>
<div><p>The extension to use for the image file.  If not specified, the
default extension “.img” will be used.  If <cite>ext</cite> is an empty
string or is None, the image file will have the same name as the
header but without the “.hdr” extension.</p>
</div></blockquote>
<p><cite>interleave</cite> (str):</p>
<blockquote>
<div><p>The band interleave format to use in the file.  This argument
should be one of “bil”, “bip”, or “bsq”.  If not specified, the
image will be written in BIP interleave.</p>
</div></blockquote>
<p><cite>byteorder</cite> (int or string):</p>
<blockquote>
<div><p>Specifies the byte order (endian-ness) of the data as
written to disk. For little endian, this value should be
either 0 or “little”.  For big endian, it should be
either 1 or “big”. If not specified, native byte order
will be used.</p>
</div></blockquote>
<p><cite>metadata</cite> (dict):</p>
<blockquote>
<div><p>A dict containing ENVI header parameters (e.g., parameters
extracted from a source image).</p>
</div></blockquote>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Save the first 10 principal components of an image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">open_image</span><span class="p">(</span><span class="s1">&#39;92AV3C.lan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pc</span> <span class="o">=</span> <span class="n">principal_components</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcdata</span> <span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">envi</span><span class="o">.</span><span class="n">save_image</span><span class="p">(</span><span class="s1">&#39;pcimage.hdr&#39;</span><span class="p">,</span> <span class="n">pcdata</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</pre></div>
</div>
<p>If the source image being saved was already in ENVI format, then the
SpyFile object for that image will contain a <cite>metadata</cite> dict that can be
passed as the <cite>metadata</cite> keyword. However, care should be taken to ensure
that all the metadata fields from the source image are still accurate
(e.g., band names or wavelengths will no longer be correct if the data
being saved are from a principal components transformation).</p>
</dd></dl>

<div class="section" id="erdas-lan">
<h4>ERDAS/Lan<a class="headerlink" href="#erdas-lan" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="module-spectral.io.erdas">
<span id="erdas-open"></span><h3>erdas.open<a class="headerlink" href="#module-spectral.io.erdas" title="Permalink to this headline">¶</a></h3>
<p>Functions for reading Erdas files.</p>
<dl class="function">
<dt id="spectral.io.erdas.open">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><em class="sig-param">file</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.erdas.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a SpyFile object for an ERDAS/Lan image file.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>file</cite> (str):</p>
<blockquote>
<div><p>Name of the ERDAS/Lan image data file.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>A SpyFile object for the image file.</p>
</div></blockquote>
<p>Raises:</p>
<blockquote>
<div><p>spectral.io.spyfile.InvalidFileError</p>
</div></blockquote>
</dd></dl>

</div>
</div>
<div class="section" id="graphics">
<h2>Graphics<a class="headerlink" href="#graphics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="colorscale">
<h3>ColorScale<a class="headerlink" href="#colorscale" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.ColorScale">
<em class="property">class </em><code class="sig-name descname">ColorScale</code><span class="sig-paren">(</span><em class="sig-param">levels</em>, <em class="sig-param">colors</em>, <em class="sig-param">num_tics=0</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.ColorScale" title="Permalink to this definition">¶</a></dt>
<dd><p>A color scale class to map scalar values to rgb colors.  The class allows
associating colors with particular scalar values, setting a background
color (for values below threshold), andadjusting the scale limits. The
<a class="reference internal" href="#spectral.ColorScale.__call__" title="spectral.ColorScale.__call__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__call__</span></code></a> operator takes a scalar input and returns the
corresponding color, interpolating between defined colors.</p>
<dl class="method">
<dt id="spectral.ColorScale.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">val</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.ColorScale.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the scale color associated with the given value.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.ColorScale.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">levels</em>, <em class="sig-param">colors</em>, <em class="sig-param">num_tics=0</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.ColorScale.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the ColorScale.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>levels</cite> (list of numbers):</p>
<blockquote>
<div><p>Scalar levels to which the <cite>colors</cite> argument will correspond.</p>
</div></blockquote>
<p><cite>colors</cite> (list of 3-tuples):</p>
<blockquote>
<div><p>RGB 3-tuples that define the colors corresponding to <cite>levels</cite>.</p>
</div></blockquote>
<p><cite>num_tics</cite> (int):</p>
<blockquote>
<div><p>The total number of colors in the scale, not including the
background color.  This includes the colors given in the
<cite>colors</cite> argument, as well as interpolated color values. If
not specified, only the colors in the <cite>colors</cite> argument will
be used (i.e., num_tics = len(colors).</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.ColorScale.set_background_color">
<code class="sig-name descname">set_background_color</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spectral.ColorScale.set_background_color" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets RGB color used for values below the scale minimum.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>color</cite> (3-tuple): An RGB triplet</p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.ColorScale.set_range">
<code class="sig-name descname">set_range</code><span class="sig-paren">(</span><em class="sig-param">min</em>, <em class="sig-param">max</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.ColorScale.set_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the min and max values of the color scale.</p>
<p>The distribution of colors within the scale will stretch or shrink
accordingly.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="get-rgb">
<h3>get_rgb<a class="headerlink" href="#get-rgb" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.graphics.graphics.get_rgb">
<code class="sig-name descname">get_rgb</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">bands=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.graphics.get_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract RGB data for display from a SpyFile object or numpy array.</p>
<dl class="simple">
<dt>USAGE: rgb = get_rgb(source [, bands] [, stretch=&lt;arg&gt; | , bounds=&lt;arg&gt;]</dt><dd><p>[, stretch_all=&lt;arg&gt;])</p>
</dd>
</dl>
<p>Arguments:</p>
<blockquote>
<div><p><cite>source</cite> (<a class="reference internal" href="#spectral.SpyFile" title="spectral.SpyFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.SpyFile</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>Data source from which to extract the RGB data.</p>
</div></blockquote>
<p><cite>bands</cite> (list of <cite>int</cite>) (optional):</p>
<blockquote>
<div><p>Optional triplet of indices which specifies the bands to extract
for the red, green, and blue components, respectively. If this
arg is not given, SpyFile object, it’s metadata dict will be
checked to see if it contains a “default bands” item.  If it does
not, then first, middle and last band will be returned.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>stretch</cite> (numeric or tuple):</p>
<blockquote>
<div><p>This keyword specifies two points on the cumulative histogram of
the input data for performing a linear stretch of RGB value for the
data. Numeric values given for this parameter are expected to be
between 0 and 1. This keyword can be expressed in three forms:</p>
<ol class="arabic simple">
<li><p>As a 2-tuple. In this case the two values specify the lower and
upper points of the cumulative histogram respectively. The
specified stretch will be performed independently on each of the
three color channels unless the <cite>stretch_all</cite> keyword is set to
True, in which case all three color channels will be stretched
identically.</p></li>
<li><p>As a 3-tuple of 2-tuples. In this case, Each channel will be
stretched according to its respective 2-tuple in the keyword
argument.</p></li>
<li><p>As a single numeric value. In this case, the value indicates the
size of the histogram tail to be applied at both ends of the
histogram for each color channel. <cite>stretch=a</cite> is equivalent to
<cite>stretch=(a, 1-a)</cite>.</p></li>
</ol>
<p>If neither <cite>stretch</cite> nor <cite>bounds</cite> are specified, then the default
value of <cite>stretch</cite> defined by <cite>spectral.settings.imshow_stretch</cite>
will be used.</p>
</div></blockquote>
<p><cite>bounds</cite> (tuple):</p>
<blockquote>
<div><p>This keyword functions similarly to the <cite>stretch</cite> keyword, except
numeric values are in image data units instead of cumulative
histogram values. The form of this keyword is the same as the first
two forms for the <cite>stretch</cite> keyword (i.e., either a 2-tuple of
numbers or a 3-tuple of 2-tuples of numbers).</p>
</div></blockquote>
<p><cite>stretch_all</cite> (bool):</p>
<blockquote>
<div><p>If this keyword is True, each color channel will be scaled
independently.</p>
</div></blockquote>
<p><cite>color_scale</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ColorScale</span></code>):</p>
<blockquote>
<div><p>A color scale to be applied to a single-band image.</p>
</div></blockquote>
<p><cite>auto_scale</cite> (bool):</p>
<blockquote>
<div><p>If <cite>color_scale</cite> is provided and <cite>auto_scale</cite> is True, the min/max
values of the color scale will be mapped to the min/max data
values.</p>
</div></blockquote>
<p><cite>colors</cite> (ndarray):</p>
<blockquote>
<div><p>If <cite>source</cite> is a single-band integer-valued np.ndarray and this
keyword is provided, then elements of <cite>source</cite> are assumed to be
color index values that specify RGB values in <cite>colors</cite>.</p>
</div></blockquote>
</div></blockquote>
<p>Examples:</p>
<p>Select color limits corresponding to 2% tails in the data histogram:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">imshow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">stretch</span><span class="o">=</span><span class="mf">0.02</span><span class="p">)</span>
</pre></div>
</div>
<p>Same as above but specify upper and lower limits explicitly:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">imshow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">stretch</span><span class="o">=</span><span class="p">(</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">))</span>
</pre></div>
</div>
<p>Same as above but specify limits for each RGB channel explicitly:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">imshow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">stretch</span><span class="o">=</span><span class="p">((</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.98</span><span class="p">)))</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="imageview">
<h3>ImageView<a class="headerlink" href="#imageview" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.graphics.spypylab.ImageView">
<em class="property">class </em><code class="sig-name descname">ImageView</code><span class="sig-paren">(</span><em class="sig-param">data=None</em>, <em class="sig-param">bands=None</em>, <em class="sig-param">classes=None</em>, <em class="sig-param">source=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to manage events and data associated with image raster views.</p>
<p>In most cases, it is more convenient to simply call <a class="reference internal" href="#spectral.graphics.spypylab.imshow" title="spectral.graphics.spypylab.imshow"><code class="xref py py-func docutils literal notranslate"><span class="pre">imshow</span></code></a>,
which creates, displays, and returns an <a class="reference internal" href="#spectral.graphics.spypylab.ImageView" title="spectral.graphics.spypylab.ImageView"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageView</span></code></a> object. Creating
an <a class="reference internal" href="#spectral.graphics.spypylab.ImageView" title="spectral.graphics.spypylab.ImageView"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageView</span></code></a> object directly (or creating an instance of a subclass)
enables additional customization of the image display (e.g., overriding
default event handlers). If the object is created directly, call the
<a class="reference internal" href="#spectral.graphics.spypylab.ImageView.show" title="spectral.graphics.spypylab.ImageView.show"><code class="xref py py-meth docutils literal notranslate"><span class="pre">show</span></code></a> method to display the image. The underlying image display
functionality is implemented via <code class="xref py py-func docutils literal notranslate"><span class="pre">matplotlib.pyplot.imshow</span></code>.</p>
<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">data=None</em>, <em class="sig-param">bands=None</em>, <em class="sig-param">classes=None</em>, <em class="sig-param">source=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Arguments:</p>
<blockquote>
<div><p><cite>data</cite> (ndarray or <code class="xref py py-class docutils literal notranslate"><span class="pre">SpyFile</span></code>):</p>
<blockquote>
<div><p>The source of RGB bands to be displayed. with shape (R, C, B).
If the shape is (R, C, 3), the last dimension is assumed to
provide the red, green, and blue bands (unless the <cite>bands</cite>
argument is provided). If <img class="math" src="_images/math/86b7855117979b12ae23c41842e728fa7dc3357c.png" alt="B &gt; 3"/> and <cite>bands</cite> is not
provided, the first, middle, and last band will be used.</p>
</div></blockquote>
<p><cite>bands</cite> (triplet of integers):</p>
<blockquote>
<div><p>Specifies which bands in <cite>data</cite> should be displayed as red,
green, and blue, respectively.</p>
</div></blockquote>
<p><cite>classes</cite> (ndarray of integers):</p>
<blockquote>
<div><p>An array of integer-valued class labels with shape (R, C). If
the <cite>data</cite> argument is provided, the shape must match the first
two dimensions of <cite>data</cite>.</p>
</div></blockquote>
<p><cite>source</cite> (ndarray or <code class="xref py py-class docutils literal notranslate"><span class="pre">SpyFile</span></code>):</p>
<blockquote>
<div><p>The source of spectral data associated with the image display.
This optional argument is used to access spectral data (e.g., to
generate a spectrum plot when a user double-clicks on the image
display.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword arguments:</p>
<blockquote>
<div><p>Any keyword that can be provided to <a class="reference internal" href="#spectral.graphics.graphics.get_rgb" title="spectral.graphics.graphics.get_rgb"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_rgb</span></code></a>
or <code class="xref py py-func docutils literal notranslate"><span class="pre">matplotlib.imshow</span></code>.</p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.class_alpha">
<em class="property">property </em><code class="sig-name descname">class_alpha</code><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.class_alpha" title="Permalink to this definition">¶</a></dt>
<dd><p>alpha transparency for the class overlay.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.format_coord">
<code class="sig-name descname">format_coord</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.format_coord" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats pixel coordinate string displayed in the window.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.interpolation">
<em class="property">property </em><code class="sig-name descname">interpolation</code><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.interpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>matplotlib pixel interpolation to use in the image display.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.label_region">
<code class="sig-name descname">label_region</code><span class="sig-paren">(</span><em class="sig-param">rectangle</em>, <em class="sig-param">class_id</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.label_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Assigns all pixels in the rectangle to the specified class.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>rectangle</cite> (4-tuple of integers):</p>
<blockquote>
<div><p>Tuple or list defining the rectangle bounds. Should have the
form (row_start, row_stop, col_start, col_stop), where the
stop indices are not included (i.e., the effect is
<cite>classes[row_start:row_stop, col_start:col_stop] = id</cite>.</p>
</div></blockquote>
<p>class_id (integer &gt;= 0):</p>
<blockquote>
<div><p>The class to which pixels will be assigned.</p>
</div></blockquote>
</div></blockquote>
<p>Returns the number of pixels reassigned (the number of pixels in the
rectangle whose class has <em>changed</em> to <cite>class_id</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.open_zoom">
<code class="sig-name descname">open_zoom</code><span class="sig-paren">(</span><em class="sig-param">center=None</em>, <em class="sig-param">size=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.open_zoom" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens a separate window with a zoomed view.
If a ctrl-lclick event occurs in the original view, the zoomed window
will pan to the location of the click event.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>center</cite> (two-tuple of int):</p>
<blockquote>
<div><p>Initial (row, col) of the zoomed view.</p>
</div></blockquote>
<p><cite>size</cite> (int):</p>
<blockquote>
<div><p>Width and height (in source image pixels) of the initial
zoomed view.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<p>A new ImageView object for the zoomed view.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.pan_to">
<code class="sig-name descname">pan_to</code><span class="sig-paren">(</span><em class="sig-param">row</em>, <em class="sig-param">col</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.pan_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Centers view on pixel coordinate (row, col).</p>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.refresh">
<code class="sig-name descname">refresh</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.refresh" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the displayed data (if it has been shown).</p>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.set_classes">
<code class="sig-name descname">set_classes</code><span class="sig-paren">(</span><em class="sig-param">classes</em>, <em class="sig-param">colors=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.set_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the array of class values associated with the image data.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>classes</cite> (ndarray of int):</p>
<blockquote>
<div><p><cite>classes</cite> must be an integer-valued array with the same
number rows and columns as the display data (if set).</p>
</div></blockquote>
<p><cite>colors</cite>: (array or 3-tuples):</p>
<blockquote>
<div><p>Color triplets (with values in the range [0, 255]) that
define the colors to be associatd with the integer indices
in <cite>classes</cite>.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p>Any valid keyword for <cite>matplotlib.imshow</cite> can be provided.</p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.set_data">
<code class="sig-name descname">set_data</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">bands=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.set_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the data to be shown in the RGB channels.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>data</cite> (ndarray or SpyImage):</p>
<blockquote>
<div><p>If <cite>data</cite> has more than 3 bands, the <cite>bands</cite> argument can be
used to specify which 3 bands to display. <cite>data</cite> will be
passed to <cite>get_rgb</cite> prior to display.</p>
</div></blockquote>
<p><cite>bands</cite> (3-tuple of int):</p>
<blockquote>
<div><p>Indices of the 3 bands to display from <cite>data</cite>.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p>Any valid keyword for <cite>get_rgb</cite> or <cite>matplotlib.imshow</cite> can be
given.</p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.set_display_mode">
<code class="sig-name descname">set_display_mode</code><span class="sig-paren">(</span><em class="sig-param">mode</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.set_display_mode" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>mode</cite> must be one of (“data”, “classes”, “overlay”).</p>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.set_rgb_options">
<code class="sig-name descname">set_rgb_options</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.set_rgb_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets parameters affecting RGB display of data.</p>
<p>Accepts any keyword supported by <a class="reference internal" href="#spectral.graphics.graphics.get_rgb" title="spectral.graphics.graphics.get_rgb"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_rgb</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.set_source">
<code class="sig-name descname">set_source</code><span class="sig-paren">(</span><em class="sig-param">source</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.set_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the image data source (used for accessing spectral data).</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>source</cite> (ndarray or <code class="xref py py-class docutils literal notranslate"><span class="pre">SpyFile</span></code>):</p>
<blockquote>
<div><p>The source for spectral data associated with the view.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.graphics.spypylab.ImageView.show">
<code class="sig-name descname">show</code><span class="sig-paren">(</span><em class="sig-param">mode=None</em>, <em class="sig-param">fignum=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.ImageView.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders the image data.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>mode</cite> (str):</p>
<blockquote>
<div><p>Must be one of:</p>
<blockquote>
<div><p>“data”:          Show the data RGB</p>
<p>“classes”:       Shows indexed color for <cite>classes</cite></p>
<p>“overlay”:       Shows class colors overlaid on data RGB.</p>
</div></blockquote>
<p>If <cite>mode</cite> is not provided, a mode will be automatically
selected, based on the data set in the ImageView.</p>
</div></blockquote>
<p><cite>fignum</cite> (int):</p>
<blockquote>
<div><p>Figure number of the matplotlib figure in which to display
the ImageView. If not provided, a new figure will be created.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="imshow">
<h3>imshow<a class="headerlink" href="#imshow" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.graphics.spypylab.imshow">
<code class="sig-name descname">imshow</code><span class="sig-paren">(</span><em class="sig-param">data=None</em>, <em class="sig-param">bands=None</em>, <em class="sig-param">classes=None</em>, <em class="sig-param">source=None</em>, <em class="sig-param">colors=None</em>, <em class="sig-param">figsize=None</em>, <em class="sig-param">fignum=None</em>, <em class="sig-param">title=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.graphics.spypylab.imshow" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper around matplotlib’s imshow for multi-band images.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>data</cite> (SpyFile or ndarray):</p>
<blockquote>
<div><p>Can have shape (R, C) or (R, C, B).</p>
</div></blockquote>
<p><cite>bands</cite> (tuple of integers, optional)</p>
<blockquote>
<div><p>If <cite>bands</cite> has 3 values, the bands specified are extracted from
<cite>data</cite> to be plotted as the red, green, and blue colors,
respectively. If it contains a single value, then a single band
will be extracted from the image.</p>
</div></blockquote>
<p><cite>classes</cite> (ndarray of integers):</p>
<blockquote>
<div><p>An array of integer-valued class labels with shape (R, C). If
the <cite>data</cite> argument is provided, the shape must match the first
two dimensions of <cite>data</cite>. The returned <cite>ImageView</cite> object will use
a copy of this array. To access class values that were altered
after calling <cite>imshow</cite>, access the <cite>classes</cite> attribute of the
returned <cite>ImageView</cite> object.</p>
</div></blockquote>
<p><cite>source</cite> (optional, SpyImage or ndarray):</p>
<blockquote>
<div><p>Object used for accessing image source data. If this argument is
not provided, events such as double-clicking will have no effect
(i.e., a spectral plot will not be created).</p>
</div></blockquote>
<p><cite>colors</cite> (optional, array of ints):</p>
<blockquote>
<div><p>Custom colors to be used for class image view. If provided, this
argument should be an array of 3-element arrays, each of which
specifies an RGB triplet with integer color components in the
range [0, 256).</p>
</div></blockquote>
<p><cite>figsize</cite> (optional, 2-tuple of scalar):</p>
<blockquote>
<div><p>Specifies the width and height (in inches) of the figure window
to be created. If this value is not provided, the value specified
in <cite>spectral.settings.imshow_figure_size</cite> will be used.</p>
</div></blockquote>
<p><cite>fignum</cite>  (optional, integer):</p>
<blockquote>
<div><p>Specifies the figure number of an existing matplotlib figure. If
this argument is None, a new figure will be created.</p>
</div></blockquote>
<p><cite>title</cite> (str):</p>
<blockquote>
<div><p>The title to be displayed above the image.</p>
</div></blockquote>
</div></blockquote>
<p>Keywords:</p>
<blockquote>
<div><p>Keywords accepted by <a class="reference internal" href="#spectral.graphics.graphics.get_rgb" title="spectral.graphics.graphics.get_rgb"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_rgb</span></code></a> or
<code class="xref py py-func docutils literal notranslate"><span class="pre">matplotlib.imshow</span></code> will be passed on to the appropriate
function.</p>
</div></blockquote>
<p>This function defaults the color scale (imshow’s “cmap” keyword) to
“gray”. To use imshow’s default color scale, call this function with
keyword <cite>cmap=None</cite>.</p>
<p>Returns:</p>
<blockquote>
<div><p>An <cite>ImageView</cite> object, which can be subsequently used to refine the
image display.</p>
</div></blockquote>
<p>See <a class="reference internal" href="#spectral.graphics.spypylab.ImageView" title="spectral.graphics.spypylab.ImageView"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageView</span></code></a> for additional details.</p>
<p>Examples:</p>
<p>Show a true color image of a hyperspectral image:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">open_image</span><span class="p">(</span><span class="s1">&#39;92AV3C.lan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">view</span> <span class="o">=</span> <span class="n">imshow</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<p>Show ground truth in a separate window:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">classes</span> <span class="o">=</span> <span class="n">open_image</span><span class="p">(</span><span class="s1">&#39;92AV3GT.GIS&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read_band</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cview</span> <span class="o">=</span> <span class="n">imshow</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="n">classes</span><span class="p">)</span>
</pre></div>
</div>
<p>Overlay ground truth data on the data display:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">view</span><span class="o">.</span><span class="n">set_classes</span><span class="p">(</span><span class="n">classes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">view</span><span class="o">.</span><span class="n">set_display_mode</span><span class="p">(</span><span class="s1">&#39;overlay&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Show RX anomaly detector results in the view and a zoom window showing
true color data:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">rx</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">open_zoom</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">view</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that pressing ctrl-lclick with the mouse in the main window will
cause the zoom window to pan to the clicked location.</p>
<p>Opening zoom windows, changing display modes, and other functions can
also be achieved via keys mapped directly to the displayed image. Press
“h” with focus on the displayed image to print a summary of mouse/
keyboard commands accepted by the display.</p>
</dd></dl>

</div>
<div class="section" id="save-rgb">
<h3>save_rgb<a class="headerlink" href="#save-rgb" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.save_rgb">
<code class="sig-name descname">save_rgb</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">data</em>, <em class="sig-param">bands=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.save_rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a viewable image to a JPEG (or other format) file.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">save_rgb</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Arguments:</p>
<blockquote>
<div><p><cite>filename</cite> (str):</p>
<blockquote>
<div><p>Name of image file to save (e.g. “rgb.jpg”)</p>
</div></blockquote>
<p><cite>data</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>Source image data to display.  <cite>data</cite> can be and instance of a
<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code> (e.g., <a class="reference internal" href="#spectral.SpyFile" title="spectral.SpyFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.SpyFile</span></code></a> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.ImageArray</span></code>) or a <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>. <cite>data</cite>
must have shape <cite>MxN</cite> or <cite>MxNxB</cite>.  If thes shape is <cite>MxN</cite>, the
image will be saved as greyscale (unless keyword <cite>colors</cite> is
specified). If the shape is <cite>MxNx3</cite>, it will be interpreted as
three <cite>MxN</cite> images defining the R, G, and B channels respectively.
If <cite>B &gt; 3</cite>, the first, middle, and last images in <cite>data</cite> will be
used, unless <cite>bands</cite> is specified.</p>
</div></blockquote>
<p><cite>bands</cite> (3-tuple of ints):</p>
<blockquote>
<div><p>Optional list of indices for bands to use in the red, green,
and blue channels, respectively.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>format</cite> (str):</p>
<blockquote>
<div><p>The image file format to create.  Must be a format recognized by
<code class="xref py py-mod docutils literal notranslate"><span class="pre">PIL</span></code> (e.g., ‘png’, ‘tiff’, ‘bmp’).  If <cite>format</cite> is not
provided, ‘jpg’ is assumed.</p>
</div></blockquote>
<p>See <a class="reference internal" href="#spectral.graphics.graphics.get_rgb" title="spectral.graphics.graphics.get_rgb"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_rgb</span></code></a> for descriptions of
additional keyword arguments.</p>
</div></blockquote>
<p>Examples:</p>
<blockquote>
<div><p>Save a color view of an image by specifying RGB band indices:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">save_image</span><span class="p">(</span><span class="s1">&#39;rgb.jpg&#39;</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="p">[</span><span class="mi">29</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">9</span><span class="p">]])</span>
</pre></div>
</div>
<p>Save the same image as <strong>png</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">save_image</span><span class="p">(</span><span class="s1">&#39;rgb.png&#39;</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="p">[</span><span class="mi">29</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">9</span><span class="p">]],</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Save classification results using the default color palette (note that
the color palette must be passed explicitly for <cite>clMap</cite> to be
interpreted as a color map):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">save_image</span><span class="p">(</span><span class="s1">&#39;results.jpg&#39;</span><span class="p">,</span> <span class="n">clMap</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">spectral</span><span class="o">.</span><span class="n">spy_colors</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="view">
<h3>view<a class="headerlink" href="#view" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.view">
<code class="sig-name descname">view</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.view" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens a window and displays a raster greyscale or color image.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">view</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Arguments:</p>
<blockquote>
<div><p><cite>source</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>Source image data to display.  <cite>source</cite> can be and instance of a
<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code> (e.g., <a class="reference internal" href="#spectral.SpyFile" title="spectral.SpyFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.SpyFile</span></code></a> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.ImageArray</span></code>) or a <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>. <cite>source</cite>
must have shape <cite>MxN</cite> or <cite>MxNxB</cite>.</p>
</div></blockquote>
<p><cite>bands</cite> (3-tuple of ints):</p>
<blockquote>
<div><p>Optional list of indices for bands to display in the red, green,
and blue channels, respectively.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>stretch</cite> (bool):</p>
<blockquote>
<div><p>If <cite>stretch</cite> evaluates True, the highest value in the data source
will be scaled to maximum color channel intensity.</p>
</div></blockquote>
<p><cite>stretch_all</cite> (bool):</p>
<blockquote>
<div><p>If <cite>stretch_all</cite> evaluates True, the highest value of the data
source in each color channel will be set to maximum intensity.</p>
</div></blockquote>
<p><cite>bounds</cite> (2-tuple of ints):</p>
<blockquote>
<div><p>Clips the input data at (lower, upper) values.</p>
</div></blockquote>
<p><cite>title</cite> (str):</p>
<blockquote>
<div><p>Text to display in the new window frame.</p>
</div></blockquote>
</div></blockquote>
<p><cite>source</cite> is the data source and can be either a <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code>
object or a numpy array. If <cite>source</cite> has shape <cite>MxN</cite>, the image will be
displayed in greyscale. If its shape is <cite>MxNx3</cite>, the three layers/bands
will be displayed as the red, green, and blue components of the displayed
image, respectively. If its shape is <cite>MxNxB</cite>, where <cite>B &gt; 3</cite>, the first,
middle, and last bands will be displayed in the RGB channels, unless
<cite>bands</cite> is specified.</p>
</dd></dl>

</div>
<div class="section" id="view-cube">
<h3>view_cube<a class="headerlink" href="#view-cube" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.view_cube">
<code class="sig-name descname">view_cube</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.view_cube" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders an interactive 3D hypercube in a new window.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>data</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>Source image data to display.  <cite>data</cite> can be and instance of a
<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code> (e.g., <a class="reference internal" href="#spectral.SpyFile" title="spectral.SpyFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.SpyFile</span></code></a> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.ImageArray</span></code>) or a <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>. <cite>source</cite>
must have shape <cite>MxN</cite> or <cite>MxNxB</cite>.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>bands</cite> (3-tuple of ints):</p>
<blockquote>
<div><p>3-tuple specifying which bands from the image data should be
displayed on top of the cube.</p>
</div></blockquote>
<p><cite>top</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">PIL.Image</span></code>):</p>
<blockquote>
<div><p>Data to display on top of the cube. This will supercede the
<cite>bands</cite> keyword.</p>
</div></blockquote>
<p><cite>scale</cite> (<a class="reference internal" href="#spectral.ColorScale" title="spectral.ColorScale"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.ColorScale</span></code></a>)</p>
<blockquote>
<div><p>A color scale to be used for color in the sides of the cube. If
this keyword is not specified,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">spectral.graphics.colorscale.defaultColorScale</span></code> is used.</p>
</div></blockquote>
<p><cite>size</cite> (2-tuple of ints):</p>
<blockquote>
<div><p>Width and height (in pixels) for initial size of the new window.</p>
</div></blockquote>
<p><cite>background</cite> (3-tuple of floats):</p>
<blockquote>
<div><p>Background RGB color of the scene. Each value should be in the
range [0, 1]. If not specified, the background will be black.</p>
</div></blockquote>
<p><cite>title</cite> (str):</p>
<blockquote>
<div><p>Title text to display in the new window frame.</p>
</div></blockquote>
</div></blockquote>
<p>This function opens a new window, renders a 3D hypercube, and accepts
keyboard input to manipulate the view of the hypercube.  Accepted keyboard
inputs are printed to the console output.  Focus must be on the 3D window
to accept keyboard input.</p>
</dd></dl>

</div>
<div class="section" id="view-indexed">
<h3>view_indexed<a class="headerlink" href="#view-indexed" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.view_indexed">
<code class="sig-name descname">view_indexed</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.view_indexed" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens a window and displays a raster image for the provided color map data.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">view_indexed</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Arguments:</p>
<blockquote>
<div><p><cite>data</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>An <cite>MxN</cite> array of integer values that correspond to colors in a
color palette.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>colors</cite> (list of 3-tuples of ints):</p>
<blockquote>
<div><p>This parameter provides an alternate color map to use for display.
The parameter is a list of 3-tuples defining RGB values, where R,
G, and B are in the range [0-255].</p>
</div></blockquote>
<p><cite>title</cite> (str):</p>
<blockquote>
<div><p>Text to display in the new window frame.</p>
</div></blockquote>
</div></blockquote>
<p>The default color palette used is defined by <code class="xref py py-obj docutils literal notranslate"><span class="pre">spectral.spy_colors</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="view-nd">
<h3>view_nd<a class="headerlink" href="#view-nd" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.view_nd">
<code class="sig-name descname">view_nd</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.view_nd" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a 3D window that displays ND data from an image.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>data</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.ImageArray</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>Source image data to display.  <cite>data</cite> can be and instance of a
<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.ImageArray</span> <span class="pre">or</span> <span class="pre">a</span> <span class="pre">:class:`numpy.ndarray</span></code>. <cite>source</cite>
must have shape <cite>MxNxB</cite>, where M &gt;= 3.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>classes</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>2-dimensional array of integers specifying the classes of each
pixel in <cite>data</cite>. <cite>classes</cite> must have the same dimensions as the
first two dimensions of <cite>data</cite>.</p>
</div></blockquote>
<p><cite>features</cite> (list or list of integer lists):</p>
<blockquote>
<div><p>This keyword specifies which bands/features from <cite>data</cite> should be
displayed in the 3D window. It must be defined as one of the
following:</p>
<ol class="arabic simple">
<li><p>A length-3 list of integer feature IDs. In this case, the data
points will be displayed in the positive x,y,z octant using
features associated with the 3 integers.</p></li>
<li><p>A length-6 list of integer feature IDs. In this case, each
integer specifies a single feature index to be associated with
the coordinate semi-axes x, y, z, -x, -y, and -z (in that
order). Each octant will display data points using the features
associated with the 3 semi-axes for that octant.</p></li>
<li><p>A length-8 list of length-3 lists of integers. In this case,
each length-3 list specfies the features to be displayed in a
single octants (the same semi-axis can be associated with
different features in different octants).  Octants are ordered
starting with the postive x,y,z octant and procede
counterclockwise around the z-axis, then procede similarly
around the negative half of the z-axis.  An octant triplet can
be specified as None instead of a list, in which case nothing
will be rendered in that octant.</p></li>
</ol>
</div></blockquote>
<p><cite>labels</cite> (list):</p>
<blockquote>
<div><p>List of labels to be displayed next to the axis assigned to a
feature.  If not specified, the feature index is shown by default.</p>
<p>The <cite>str()</cite> function will be called on each item of the list so,
for example, a list of wavelengths can be passed as the labels.</p>
</div></blockquote>
<p><cite>size</cite> (2-tuple of ints)</p>
<blockquote>
<div><p>Specifies the initial size (pixel rows/cols) of the window.</p>
</div></blockquote>
<p><cite>title</cite> (string)</p>
<blockquote>
<div><p>The title to display in the ND window title bar.</p>
</div></blockquote>
</div></blockquote>
<p>Returns an NDWindowProxy object with a <cite>classes</cite> member to access the
current class labels associated with data points and a <cite>set_features</cite>
member to specify which features are displayed.</p>
</dd></dl>

</div>
</div>
<div class="section" id="training-classes">
<h2>Training Classes<a class="headerlink" href="#training-classes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-training-classes">
<h3>create_training_classes<a class="headerlink" href="#create-training-classes" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.create_training_classes">
<code class="sig-name descname">create_training_classes</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">class_mask</em>, <em class="sig-param">calc_stats=False</em>, <em class="sig-param">indices=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.create_training_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a :class:spectral.algorithms.TrainingClassSet: from an indexed array.</p>
<p>USAGE:  sets = createTrainingClasses(classMask)</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>image</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>The image data for which the training classes will be defined.
<cite>image</cite> has shape <cite>MxNxB</cite>.</p>
</div></blockquote>
<p><cite>class_mask</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>A rank-2 array whose elements are indices of various spectral
classes.  if <cite>class_mask[i,j]</cite> == <cite>k</cite>, then <cite>image[i,j]</cite> is
assumed to belong to class <cite>k</cite>.</p>
</div></blockquote>
<p><cite>calc_stats</cite> (bool):</p>
<blockquote>
<div><p>An optional parameter which, if True, causes statistics to be
calculated for all training classes.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.algorithms.TrainingClassSet</span></code> object.</p>
</div></blockquote>
<p>The dimensions of classMask should be the same as the first two dimensions
of the corresponding image. Values of zero in classMask are considered
unlabeled and are not added to a training set.</p>
</dd></dl>

</div>
<div class="section" id="trainingclass">
<h3>TrainingClass<a class="headerlink" href="#trainingclass" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.algorithms.algorithms.TrainingClass">
<em class="property">class </em><code class="sig-name descname">TrainingClass</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">mask</em>, <em class="sig-param">index=0</em>, <em class="sig-param">class_prob=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClass" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="spectral.algorithms.algorithms.TrainingClass.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">mask</em>, <em class="sig-param">index=0</em>, <em class="sig-param">class_prob=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClass.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new training class defined by applying <cite>mask</cite> to <cite>image</cite>.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>image</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>The <cite>MxNxB</cite> image over which the training class is defined.</p>
</div></blockquote>
<p><cite>mask</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>An <cite>MxN</cite> array of integers that specifies which pixels in
<cite>image</cite> are associated with the class.</p>
</div></blockquote>
<p><cite>index</cite> (int) [default 0]:</p>
<blockquote>
<div><p>if <cite>index</cite> == 0, all nonzero elements of <cite>mask</cite> are associated
with the class.  If <cite>index</cite> is nonzero, all elements of <cite>mask</cite>
equal to <cite>index</cite> are associated with the class.</p>
</div></blockquote>
<p><cite>class_prob</cite> (float) [default 1.0]:</p>
<blockquote>
<div><p>Defines the prior probability associated with the class, which
is used in maximum likelihood classification.  If <cite>classProb</cite>
is 1.0, prior probabilities are ignored by classifiers, giving
all class equal weighting.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.TrainingClass.__iter__">
<code class="sig-name descname">__iter__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClass.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator over all samples for the class.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.TrainingClass.calc_stats">
<code class="sig-name descname">calc_stats</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClass.calc_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates statistics for the class.</p>
<p>This function causes the <code class="xref py py-attr docutils literal notranslate"><span class="pre">stats</span></code> attribute of the class to be
updated, where <cite>stats</cite> will have the following attributes:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 31%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>mean</cite></p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p></td>
<td><p>length-<cite>B</cite> mean vector</p></td>
</tr>
<tr class="row-odd"><td><p><cite>cov</cite></p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p></td>
<td><p><cite>BxB</cite> covariance matrix</p></td>
</tr>
<tr class="row-even"><td><p><cite>inv_cov</cite></p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p></td>
<td><p>Inverse of <cite>cov</cite></p></td>
</tr>
<tr class="row-odd"><td><p><cite>log_det_cov</cite></p></td>
<td><p>float</p></td>
<td><p>Natural log of determinant of <cite>cov</cite></p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.TrainingClass.size">
<code class="sig-name descname">size</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClass.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of pixels/samples in the training set.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.TrainingClass.stats_valid">
<code class="sig-name descname">stats_valid</code><span class="sig-paren">(</span><em class="sig-param">tf=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClass.stats_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets statistics for the TrainingClass to be valid or invalid.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>tf</cite> (bool or None):</p>
<blockquote>
<div><p>A value evaluating to False indicates that statistics should be
recalculated prior to being used. If the argument is <cite>None</cite>,
a value will be returned indicating whether stats need to be
recomputed.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.TrainingClass.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param">transform</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClass.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a linear transformation on the statistics of the training set.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>transform</cite> (:class:numpy.ndarray or LinearTransform):</p>
<blockquote>
<div><p>The linear transform array.  If the class has <cite>B</cite> bands, then
<cite>transform</cite> must have shape <cite>(C,B)</cite>.</p>
</div></blockquote>
</div></blockquote>
<p>After <cite>transform</cite> is applied, the class statistics will have <cite>C</cite> bands.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="traningclassset">
<h3>TraningClassSet<a class="headerlink" href="#traningclassset" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.algorithms.algorithms.TrainingClassSet">
<em class="property">class </em><code class="sig-name descname">TrainingClassSet</code><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClassSet" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to manage a set of <code class="xref py py-class docutils literal notranslate"><span class="pre">TrainingClass</span></code> objects.</p>
<dl class="method">
<dt id="spectral.algorithms.algorithms.TrainingClassSet.__getitem__">
<code class="sig-name descname">__getitem__</code><span class="sig-paren">(</span><em class="sig-param">i</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClassSet.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the training class having ID i.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.TrainingClassSet.__iter__">
<code class="sig-name descname">__iter__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClassSet.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>An iterator over all training classes in the set.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.TrainingClassSet.__len__">
<code class="sig-name descname">__len__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClassSet.__len__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of training classes in the set.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.TrainingClassSet.add_class">
<code class="sig-name descname">add_class</code><span class="sig-paren">(</span><em class="sig-param">cl</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClassSet.add_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a new class to the training set.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>cl</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.TrainingClass</span></code>):</p>
<blockquote>
<div><p><cite>cl.index</cite> must not duplicate a class already in the set.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.TrainingClassSet.all_samples">
<code class="sig-name descname">all_samples</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClassSet.all_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>An iterator over all samples in all classes.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.TrainingClassSet.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param">X</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.TrainingClassSet.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies linear transform, M, to all training classes.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>X</cite> (:class:numpy.ndarray):</p>
<blockquote>
<div><p>The linear transform array.  If the classes have <cite>B</cite> bands, then
<cite>X</cite> must have shape <cite>(C,B)</cite>.</p>
</div></blockquote>
</div></blockquote>
<p>After the transform is applied, all classes will have <cite>C</cite> bands.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="spectral-classes-functions">
<h2>Spectral Classes/Functions<a class="headerlink" href="#spectral-classes-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="adaptive-coherence-cosine-estimator-ace">
<h3>Adaptive Coherence/Cosine Estimator (ACE)<a class="headerlink" href="#adaptive-coherence-cosine-estimator-ace" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.detectors.ace">
<code class="sig-name descname">ace</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">target</em>, <em class="sig-param">background=None</em>, <em class="sig-param">window=None</em>, <em class="sig-param">cov=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.detectors.ace" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns Adaptive Coherence/Cosine Estimator (ACE) detection scores.</p>
<p>Usage:</p>
<blockquote>
<div><p>y = ace(X, target, background)</p>
<p>y = ace(X, target, window=&lt;win&gt; [, cov=&lt;cov&gt;])</p>
</div></blockquote>
<p>Arguments:</p>
<blockquote>
<div><p><cite>X</cite> (numpy.ndarray):</p>
<blockquote>
<div><p>For the first calling method shown, <cite>X</cite> can be an ndarray with
shape (R, C, B) or an ndarray of shape (R * C, B). If the
<cite>background</cite> keyword is given, it will be used for the image
background statistics; otherwise, background statistics will be
computed from <cite>X</cite>.</p>
<p>If the <cite>window</cite> keyword is given, <cite>X</cite> must be a 3-dimensional
array and background statistics will be computed for each point
in the image using a local window defined by the keyword.</p>
</div></blockquote>
<p><cite>target</cite> (ndarray or sequence of ndarray):</p>
<blockquote>
<div><p>If <cite>X</cite> has shape (R, C, B), <cite>target</cite> can be any of the following:</p>
<blockquote>
<div><p>A length-B ndarray. In this case, <cite>target</cite> specifies a single
target spectrum to be detected. The return value will be an
ndarray with shape (R, C).</p>
<p>An ndarray with shape (D, B). In this case, <cite>target</cite> contains
<cite>D</cite> length-B targets that define a subspace for the detector.
The return value will be an ndarray with shape (R, C).</p>
<p>A length-D sequence (e.g., list or tuple) of length-B ndarrays.
In this case, the detector will be applied seperately to each of
the <cite>D</cite> targets. This is equivalent to calling the function
sequentially for each target and stacking the results but is
much faster. The return value will be an ndarray with shape
(R, C, D).</p>
</div></blockquote>
</div></blockquote>
<p><cite>background</cite> (<cite>GaussianStats</cite>):</p>
<blockquote>
<div><p>The Gaussian statistics for the background (e.g., the result
of calling <code class="xref py py-func docutils literal notranslate"><span class="pre">calc_stats</span></code> for an image). This argument is not
required if <cite>window</cite> is given.</p>
</div></blockquote>
<p><cite>window</cite> (2-tuple of odd integers):</p>
<blockquote>
<div><p>Must have the form (<cite>inner</cite>, <cite>outer</cite>), where the two values
specify the widths (in pixels) of inner and outer windows centered
about the pixel being evaulated. Both values must be odd integers.
The background mean and covariance will be estimated from pixels
in the outer window, excluding pixels within the inner window. For
example, if (<cite>inner</cite>, <cite>outer</cite>) = (5, 21), then the number of
pixels used to estimate background statistics will be
<img class="math" src="_images/math/4f3bdafd2863b618a470035befb4daeef90f1d97.png" alt="21^2 - 5^2 = 416"/>. If this argument is given, <cite>background</cite>
is not required (and will be ignored, if given).</p>
<p>The window is modified near image borders, where full, centered
windows cannot be created. The outer window will be shifted, as
needed, to ensure that the outer window still has height and width
<cite>outer</cite> (in this situation, the pixel being evaluated will not be
at the center of the outer window). The inner window will be
clipped, as needed, near image borders. For example, assume an
image with 145 rows and columns. If the window used is
(5, 21), then for the image pixel at (0, 0) (upper left corner),
the the inner window will cover <cite>image[:3, :3]</cite> and the outer
window will cover <cite>image[:21, :21]</cite>. For the pixel at (50, 1), the
inner window will cover <cite>image[48:53, :4]</cite> and the outer window
will cover <cite>image[40:51, :21]</cite>.</p>
</div></blockquote>
<p><cite>cov</cite> (ndarray):</p>
<blockquote>
<div><p>An optional covariance to use. If this parameter is given, <cite>cov</cite>
will be used for all matched filter calculations (background
covariance will not be recomputed in each window) and only the
background mean will be recomputed in each window. If the
<cite>window</cite> argument is specified, providing <cite>cov</cite> will allow the
result to be computed <em>much</em> faster.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>vectorize</cite> (bool, default True):</p>
<blockquote>
<div><p>Specifies whether the function should attempt to vectorize
operations. This typicall results in faster computation but will
consume more memory.</p>
</div></blockquote>
</div></blockquote>
<p>Returns numpy.ndarray:</p>
<blockquote>
<div><p>The return value will be the ACE scores for each input pixel. The shape
of the returned array will be either (R, C) or (R, C, D), depending on
the value of the <cite>target</cite> argument.</p>
</div></blockquote>
<p>References:</p>
<p>Kraut S. &amp; Scharf L.L., “The CFAR Adaptive Subspace Detector is a Scale-
Invariant GLRT,” IEEE Trans. Signal Processing., vol. 47 no. 9, pp. 2538-41,
Sep. 1999</p>
</dd></dl>

</div>
<div class="section" id="asterdatabase">
<h3>AsterDatabase<a class="headerlink" href="#asterdatabase" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.database.AsterDatabase">
<em class="property">class </em><code class="sig-name descname">AsterDatabase</code><span class="sig-paren">(</span><em class="sig-param">sqlite_filename=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.database.AsterDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>A relational database to manage ASTER spectral library data.</p>
<dl class="method">
<dt id="spectral.database.AsterDatabase.create">
<em class="property">classmethod </em><code class="sig-name descname">create</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">aster_data_dir=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.database.AsterDatabase.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an ASTER relational database by parsing ASTER data files.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>filename</cite> (str):</p>
<blockquote>
<div><p>Name of the new sqlite database file to create.</p>
</div></blockquote>
<p><cite>aster_data_dir</cite> (str):</p>
<blockquote>
<div><p>Path to the directory containing ASTER library data files. If
this argument is not provided, no data will be imported.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>An <a class="reference internal" href="#spectral.database.AsterDatabase" title="spectral.database.AsterDatabase"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsterDatabase</span></code></a> object.</p>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">AsterDatabase</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;aster_lib.db&quot;</span><span class="p">,</span> <span class="s2">&quot;/CDROM/ASTER2.0/data&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This is a class method (it does not require instantiating an
AsterDatabase object) that creates a new database by parsing all of the
files in the ASTER library data directory.  Normally, this should only
need to be called once.  Subsequently, a corresponding database object
can be created by instantiating a new AsterDatabase object with the
path the database file as its argument.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spectral.database.aster</span> <span class="kn">import</span> <span class="n">AsterDatabase</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">AsterDatabase</span><span class="p">(</span><span class="s2">&quot;aster_lib.db&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="spectral.database.AsterDatabase.create_envi_spectral_library">
<code class="sig-name descname">create_envi_spectral_library</code><span class="sig-paren">(</span><em class="sig-param">spectrumIDs</em>, <em class="sig-param">bandInfo</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.database.AsterDatabase.create_envi_spectral_library" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an ENVI-formatted spectral library for a list of spectra.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>spectrumIDs</cite> (list of ints):</p>
<blockquote>
<div><p>List of <strong>SpectrumID</strong> values for of spectra in the “Spectra”
table of the ASTER database.</p>
</div></blockquote>
<p><cite>bandInfo</cite> (<a class="reference internal" href="#spectral.BandInfo" title="spectral.BandInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">BandInfo</span></code></a>):</p>
<blockquote>
<div><p>The spectral bands to which the original ASTER library spectra
will be resampled.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>A <a class="reference internal" href="#spectral.io.envi.SpectralLibrary" title="spectral.io.envi.SpectralLibrary"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpectralLibrary</span></code></a> object.</p>
</div></blockquote>
<p>The IDs passed to the method should correspond to the SpectrumID field
of the ASTER database “Spectra” table.  All specified spectra will be
resampled to the same discretization specified by the bandInfo
parameter. See <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.BandResampler</span></code> for details on the
resampling method used.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.database.AsterDatabase.get_signature">
<code class="sig-name descname">get_signature</code><span class="sig-paren">(</span><em class="sig-param">spectrumID</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.database.AsterDatabase.get_signature" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a spectrum with some additional metadata.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sig</span> <span class="o">=</span> <span class="n">aster</span><span class="o">.</span><span class="n">get_signature</span><span class="p">(</span><span class="n">spectrumID</span><span class="p">)</span>
</pre></div>
</div>
<p>Arguments:</p>
<blockquote>
<div><p><cite>spectrumID</cite> (int):</p>
<blockquote>
<div><p>The <strong>SpectrumID</strong> value for the desired spectrum from the
<strong>Spectra</strong> table in the database.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><cite>sig</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Signature</span></code>):</p>
<blockquote>
<div><p>An object with the following attributes:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 8%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>measurement_id</p></td>
<td><p>int</p></td>
<td><p>SpectrumID value from Spectra table</p></td>
</tr>
<tr class="row-odd"><td><p>sample_name</p></td>
<td><p>str</p></td>
<td><p><strong>Sample</strong> from the <strong>Samples</strong> table</p></td>
</tr>
<tr class="row-even"><td><p>sample_id</p></td>
<td><p>int</p></td>
<td><p><strong>SampleID</strong> from the <strong>Samples</strong> table</p></td>
</tr>
<tr class="row-odd"><td><p>x</p></td>
<td><p>list</p></td>
<td><p>list of band center wavelengths</p></td>
</tr>
<tr class="row-even"><td><p>y</p></td>
<td><p>list</p></td>
<td><p>list of spectrum values for each band</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.database.AsterDatabase.get_spectrum">
<code class="sig-name descname">get_spectrum</code><span class="sig-paren">(</span><em class="sig-param">spectrumID</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.database.AsterDatabase.get_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a spectrum from the database.</p>
<p>Usage:</p>
<blockquote>
<div><p>(x, y) = aster.get_spectrum(spectrumID)</p>
</div></blockquote>
<p>Arguments:</p>
<blockquote>
<div><p><cite>spectrumID</cite> (int):</p>
<blockquote>
<div><p>The <strong>SpectrumID</strong> value for the desired spectrum from the
<strong>Spectra</strong> table in the database.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><cite>x</cite> (list):</p>
<blockquote>
<div><p>Band centers for the spectrum.</p>
</div></blockquote>
<p><cite>y</cite> (list):</p>
<blockquote>
<div><p>Spectrum data values for each band.</p>
</div></blockquote>
</div></blockquote>
<p>Returns a pair of vectors containing the wavelengths and measured
values values of a measurment.  For additional metadata, call
“get_signature” instead.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.database.AsterDatabase.print_query">
<code class="sig-name descname">print_query</code><span class="sig-paren">(</span><em class="sig-param">sql</em>, <em class="sig-param">args=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.database.AsterDatabase.print_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the text result of an arbitrary SQL statement.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>sql</cite> (str):</p>
<blockquote>
<div><p>An SQL statement to be passed to the database. Use “?” for
variables passed into the statement.</p>
</div></blockquote>
<p><cite>args</cite> (tuple):</p>
<blockquote>
<div><p>Optional arguments which will replace the “?” placeholders in
the <cite>sql</cite> argument.</p>
</div></blockquote>
</div></blockquote>
<p>This function performs the same query function as
<code class="xref py py-meth docutils literal notranslate"><span class="pre">spectral.database.Asterdatabase.query</span></code> except query results are
printed to <strong>stdout</strong> instead of returning a cursor object.</p>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;SELECT SpectrumID, Name FROM Samples, Spectra &#39;</span> <span class="o">+</span>
<span class="gp">... </span>       <span class="s1">&#39;WHERE Spectra.SampleID = Samples.SampleID &#39;</span> <span class="o">+</span>
<span class="gp">... </span>       <span class="s1">&#39;AND Name LIKE &quot;</span><span class="si">%g</span><span class="s1">rass%&quot; AND MinWavelength &lt; ?&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">print_query</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
<span class="go">356|dry grass</span>
<span class="go">357|grass</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="spectral.database.AsterDatabase.query">
<code class="sig-name descname">query</code><span class="sig-paren">(</span><em class="sig-param">sql</em>, <em class="sig-param">args=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.database.AsterDatabase.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the result of an arbitrary SQL statement.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>sql</cite> (str):</p>
<blockquote>
<div><p>An SQL statement to be passed to the database. Use “?” for
variables passed into the statement.</p>
</div></blockquote>
<p><cite>args</cite> (tuple):</p>
<blockquote>
<div><p>Optional arguments which will replace the “?” placeholders in
the <cite>sql</cite> argument.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>An <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite3.Cursor</span></code> object with the query results.</p>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sql</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;SELECT SpectrumID, Name FROM Samples, Spectra &#39;</span> <span class="o">+</span>
<span class="gp">... </span>       <span class="s1">&#39;WHERE Spectra.SampleID = Samples.SampleID &#39;</span> <span class="o">+</span>
<span class="gp">... </span>       <span class="s1">&#39;AND Name LIKE &quot;</span><span class="si">%g</span><span class="s1">rass%&quot; AND MinWavelength &lt; ?&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cur</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">row</span>
<span class="gp">...</span>
<span class="go">(356, u&#39;dry grass&#39;)</span>
<span class="go">(357, u&#39;grass&#39;)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="bandinfo">
<span id="spectral-band-info"></span><h3>BandInfo<a class="headerlink" href="#bandinfo" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.BandInfo">
<em class="property">class </em><code class="sig-name descname">BandInfo</code><a class="headerlink" href="#spectral.BandInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>A BandInfo object characterizes the spectral bands associated with an
image. All BandInfo member variables are optional.  For <em>N</em> bands, all
members of type &lt;list&gt; will have length <em>N</em> and contain float values.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 61%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Member</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>centers</p></td>
<td><p>List of band centers</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p>bandwidths</p></td>
<td><p>List of band FWHM values</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>centers_stdevs</p></td>
<td><p>List of std devs of band centers</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p>bandwidth_stdevs</p></td>
<td><p>List of std devs of bands FWHMs</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>band_quantity</p></td>
<td><p>Image data type (e.g., “reflectance”)</p></td>
<td><p>“”</p></td>
</tr>
<tr class="row-odd"><td><p>band_unit</p></td>
<td><p>Band unit (e.g., “nanometer”)</p></td>
<td><p>“”</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="bandresampler">
<h3>BandResampler<a class="headerlink" href="#bandresampler" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.algorithms.resampling.BandResampler">
<em class="property">class </em><code class="sig-name descname">BandResampler</code><span class="sig-paren">(</span><em class="sig-param">centers1</em>, <em class="sig-param">centers2</em>, <em class="sig-param">fwhm1=None</em>, <em class="sig-param">fwhm2=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.resampling.BandResampler" title="Permalink to this definition">¶</a></dt>
<dd><p>A callable object for resampling spectra between band discretizations.</p>
<p>A source band will contribute to any destination band where there is
overlap between the FWHM of the two bands.  If there is an overlap, an
integral is performed over the region of overlap assuming the source band
data value is constant over its FWHM (since we do not know the true
spectral load over the source band) and the destination band has a Gaussian
response function. Any target bands that do not have any overlapping source
bands will contain NaN as the resampled band value.</p>
<p>If bandwidths are not specified for source or destination bands, the bands
are assumed to have FWHM values that span half the distance to the adjacent
bands.</p>
<dl class="method">
<dt id="spectral.algorithms.resampling.BandResampler.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">spectrum</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.resampling.BandResampler.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a source spectrum as input and returns a resampled spectrum.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>spectrum</cite> (list or <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>list or vector of values to be resampled.  Must have same
length as the source band discretiation used to created the
resampler.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>A resampled rank-1 <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> with length corresponding
to the destination band discretization used to create the resampler.</p>
</div></blockquote>
<p>Any target bands that do not have at lease one overlapping source band
will contain <cite>float(‘nan’)</cite> as the resampled band value.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.resampling.BandResampler.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">centers1</em>, <em class="sig-param">centers2</em>, <em class="sig-param">fwhm1=None</em>, <em class="sig-param">fwhm2=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.resampling.BandResampler.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>BandResampler constructor.</p>
<p>Usage:</p>
<blockquote>
<div><p>resampler = BandResampler(bandInfo1, bandInfo2)</p>
<p>resampler = BandResampler(centers1, centers2, [fwhm1 = None [, fwhm2 = None]])</p>
</div></blockquote>
<p>Arguments:</p>
<blockquote>
<div><p><cite>bandInfo1</cite> (<a class="reference internal" href="#spectral.BandInfo" title="spectral.BandInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">BandInfo</span></code></a>):</p>
<blockquote>
<div><p>Discretization of the source bands.</p>
</div></blockquote>
<p><cite>bandInfo2</cite> (<a class="reference internal" href="#spectral.BandInfo" title="spectral.BandInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">BandInfo</span></code></a>):</p>
<blockquote>
<div><p>Discretization of the destination bands.</p>
</div></blockquote>
<p><cite>centers1</cite> (list):</p>
<blockquote>
<div><p>floats defining center values of source bands.</p>
</div></blockquote>
<p><cite>centers2</cite> (list):</p>
<blockquote>
<div><p>floats defining center values of destination bands.</p>
</div></blockquote>
<p><cite>fwhm1</cite> (list):</p>
<blockquote>
<div><p>Optional list defining FWHM values of source bands.</p>
</div></blockquote>
<p><cite>fwhm2</cite> (list):</p>
<blockquote>
<div><p>Optional list defining FWHM values of destination bands.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>A callable BandResampler object that takes a spectrum corresponding
to the source bands and returns the spectrum resampled to the
destination bands.</p>
</div></blockquote>
<p>If bandwidths are not specified, the associated bands are assumed to
have FWHM values that span half the distance to the adjacent bands.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="bhattacharyya-distance">
<h3>Bhattacharyya Distance<a class="headerlink" href="#bhattacharyya-distance" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.algorithms.bdist">
<code class="sig-name descname">bdist</code><span class="sig-paren">(</span><em class="sig-param">class1</em>, <em class="sig-param">class2</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.bdist" title="Permalink to this definition">¶</a></dt>
<dd><p>Calulates the Bhattacharyya distance between two classes.</p>
<p>USAGE:  bd = bdist(class1, class2)</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>class1</cite>, <cite>class2</cite> (<a class="reference internal" href="#spectral.algorithms.algorithms.TrainingClass" title="spectral.algorithms.algorithms.TrainingClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">TrainingClass</span></code></a>)</p>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>A float value for the Bhattacharyya Distance between the classes.  This
function is aliased to <code class="xref py py-func docutils literal notranslate"><span class="pre">bDistance</span></code>.</p>
</div></blockquote>
<p>References:</p>
<blockquote>
<div><p>Richards, J.A. &amp; Jia, X. Remote Sensing Digital Image Analysis: An
Introduction. (Springer: Berlin, 1999).</p>
</div></blockquote>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since it is unlikely anyone can actually remember how to spell
“Bhattacharyya”, this function has been aliased to “bdist”
for convenience.</p>
</div>
</div>
<div class="section" id="calc-stats">
<h3>calc_stats<a class="headerlink" href="#calc-stats" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.calc_stats">
<code class="sig-name descname">calc_stats</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">mask=None</em>, <em class="sig-param">index=None</em>, <em class="sig-param">allow_nan=False</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.calc_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes Gaussian stats for image data..</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>image</cite> (ndarrray, <code class="xref py py-class docutils literal notranslate"><span class="pre">Image</span></code>, or <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Iterator</span></code>):</p>
<blockquote>
<div><p>If an ndarray, it should have shape <cite>MxNxB</cite> and the mean &amp;
covariance will be calculated for each band (third dimension).</p>
</div></blockquote>
<p><cite>mask</cite> (ndarray):</p>
<blockquote>
<div><p>If <cite>mask</cite> is specified, mean &amp; covariance will be calculated for
all pixels indicated in the mask array.  If <cite>index</cite> is specified,
all pixels in <cite>image</cite> for which <cite>mask == index</cite> will be used;
otherwise, all nonzero elements of <cite>mask</cite> will be used.</p>
</div></blockquote>
<p><cite>index</cite> (int):</p>
<blockquote>
<div><p>Specifies which value in <cite>mask</cite> to use to select pixels from
<cite>image</cite>. If not specified but <cite>mask</cite> is, then all nonzero elements
of <cite>mask</cite> will be used.</p>
</div></blockquote>
<p><cite>allow_nan</cite> (bool, default False):</p>
<blockquote>
<div><p>If True, statistics will be computed even if <cite>np.nan</cite> values are
present in the data; otherwise, <cite>~spectral.algorithms.spymath.NaNValueError</cite>
is raised.</p>
</div></blockquote>
<p>If neither <cite>mask</cite> nor <cite>index</cite> are specified, all samples in <cite>vectors</cite>
will be used.</p>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><cite>GaussianStats</cite> object:</p>
<blockquote>
<div><p>This object will have members <cite>mean</cite>, <cite>cov</cite>, and <cite>nsamples</cite>.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="covariance">
<h3>covariance<a class="headerlink" href="#covariance" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.algorithms.covariance">
<code class="sig-name descname">covariance</code><span class="sig-paren">(</span><em class="sig-param">*args</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.covariance" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the covariance of the set of vectors.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span> <span class="o">=</span> <span class="n">covariance</span><span class="p">(</span><span class="n">vectors</span> <span class="p">[,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span> <span class="p">[,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">]])</span>
</pre></div>
</div>
<p>Arguments:</p>
<blockquote>
<div><p><cite>vectors</cite> (ndarrray, <code class="xref py py-class docutils literal notranslate"><span class="pre">Image</span></code>, or <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Iterator</span></code>):</p>
<blockquote>
<div><p>If an ndarray, it should have shape <cite>MxNxB</cite> and the mean &amp;
covariance will be calculated for each band (third dimension).</p>
</div></blockquote>
<p><cite>mask</cite> (ndarray):</p>
<blockquote>
<div><p>If <cite>mask</cite> is specified, mean &amp; covariance will be calculated for
all pixels indicated in the mask array.  If <cite>index</cite> is specified,
all pixels in <cite>image</cite> for which <cite>mask == index</cite> will be used;
otherwise, all nonzero elements of <cite>mask</cite> will be used.</p>
</div></blockquote>
<p><cite>index</cite> (int):</p>
<blockquote>
<div><p>Specifies which value in <cite>mask</cite> to use to select pixels from
<cite>image</cite>. If not specified but <cite>mask</cite> is, then all nonzero elements
of <cite>mask</cite> will be used.</p>
</div></blockquote>
<p>If neither <cite>mask</cite> nor <cite>index</cite> are specified, all samples in <cite>vectors</cite>
will be used.</p>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><cite>C</cite> (ndarray):</p>
<blockquote>
<div><p>The <cite>BxB</cite> unbiased estimate (dividing by N-1) of the covariance
of the vectors.</p>
</div></blockquote>
</div></blockquote>
<p>To also return the mean vector and number of samples, call
<a class="reference internal" href="#spectral.algorithms.algorithms.mean_cov" title="spectral.algorithms.algorithms.mean_cov"><code class="xref py py-func docutils literal notranslate"><span class="pre">mean_cov</span></code></a> instead.</p>
</dd></dl>

</div>
<div class="section" id="cov-avg">
<h3>cov_avg<a class="headerlink" href="#cov-avg" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.algorithms.cov_avg">
<code class="sig-name descname">cov_avg</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">mask</em>, <em class="sig-param">weighted=True</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.cov_avg" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the covariance averaged over a set of classes.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>image</cite> (ndarrray, <code class="xref py py-class docutils literal notranslate"><span class="pre">Image</span></code>, or <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Iterator</span></code>):</p>
<blockquote>
<div><p>If an ndarray, it should have shape <cite>MxNxB</cite> and the mean &amp;
covariance will be calculated for each band (third dimension).</p>
</div></blockquote>
<p><cite>mask</cite> (integer-valued ndarray):</p>
<blockquote>
<div><p>Elements specify the classes associated with pixels in <cite>image</cite>.
All pixels associeted with non-zero elements of <cite>mask</cite> will be
used in the covariance calculation.</p>
</div></blockquote>
<p><cite>weighted</cite> (bool, default True):</p>
<blockquote>
<div><p>Specifies whether the individual class covariances should be
weighted when computing the average. If True, each class will
be weighted by the number of pixels provided for the class;
otherwise, a simple average of the class covariances is performed.</p>
</div></blockquote>
</div></blockquote>
<p>Returns a class-averaged covariance matrix. The number of covariances used
in the average is equal to the number of non-zero elements of <cite>mask</cite>.</p>
</dd></dl>

</div>
<div class="section" id="ecostressdatabase">
<h3>EcostressDatabase<a class="headerlink" href="#ecostressdatabase" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.database.EcostressDatabase">
<em class="property">class </em><code class="sig-name descname">EcostressDatabase</code><span class="sig-paren">(</span><em class="sig-param">sqlite_filename=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.database.EcostressDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>A relational database to manage ECOSTRESS spectral library data.</p>
<dl class="method">
<dt id="spectral.database.EcostressDatabase.create">
<em class="property">classmethod </em><code class="sig-name descname">create</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">data_dir=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.database.EcostressDatabase.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an ECOSTRESS relational database by parsing ECOSTRESS data files.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>filename</cite> (str):</p>
<blockquote>
<div><p>Name of the new sqlite database file to create.</p>
</div></blockquote>
<p><cite>data_dir</cite> (str):</p>
<blockquote>
<div><p>Path to the directory containing ECOSTRESS library data files. If
this argument is not provided, no data will be imported.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>An <a class="reference internal" href="#spectral.database.EcostressDatabase" title="spectral.database.EcostressDatabase"><code class="xref py py-class docutils literal notranslate"><span class="pre">EcostressDatabase</span></code></a> object.</p>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EcostressDatabase</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;ecostress.db&quot;</span><span class="p">,</span> <span class="s2">&quot;./eco_data_ver1/&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This is a class method (it does not require instantiating an
EcostressDatabase object) that creates a new database by parsing all of the
files in the ECOSTRESS library data directory.  Normally, this should only
need to be called once.  Subsequently, a corresponding database object
can be created by instantiating a new EcostressDatabase object with the
path the database file as its argument.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spectral.database.ecostress</span> <span class="kn">import</span> <span class="n">EcostressDatabase</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">EcostressDatabase</span><span class="p">(</span><span class="s2">&quot;~/ecostress.db&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="fisherlineardiscriminant">
<h3>FisherLinearDiscriminant<a class="headerlink" href="#fisherlineardiscriminant" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.algorithms.algorithms.FisherLinearDiscriminant">
<em class="property">class </em><code class="sig-name descname">FisherLinearDiscriminant</code><span class="sig-paren">(</span><em class="sig-param">vals</em>, <em class="sig-param">vecs</em>, <em class="sig-param">mean</em>, <em class="sig-param">cov_b</em>, <em class="sig-param">cov_w</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.FisherLinearDiscriminant" title="Permalink to this definition">¶</a></dt>
<dd><p>An object for storing a data set’s linear discriminant data.  For <cite>C</cite>
classes with <cite>B</cite>-dimensional data, the object has the following members:</p>
<blockquote>
<div><p><cite>eigenvalues</cite>:</p>
<blockquote>
<div><p>A length <cite>C-1</cite> array of eigenvalues</p>
</div></blockquote>
<p><cite>eigenvectors</cite>:</p>
<blockquote>
<div><p>A <cite>BxC</cite> array of normalized eigenvectors</p>
</div></blockquote>
<p><cite>mean</cite>:</p>
<blockquote>
<div><p>The length <cite>B</cite> mean vector of the image pixels (from all classes)</p>
</div></blockquote>
<p><cite>cov_b</cite>:</p>
<blockquote>
<div><p>The <cite>BxB</cite> matrix of covariance <em>between</em> classes</p>
</div></blockquote>
<p><cite>cov_w</cite>:</p>
<blockquote>
<div><p>The <cite>BxB</cite> matrix of average covariance <em>within</em> each class</p>
</div></blockquote>
<p><cite>transform</cite>:</p>
<blockquote>
<div><p>A callable function to transform data to the space of the
linear discriminant.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="gaussianclassifier">
<h3>GaussianClassifier<a class="headerlink" href="#gaussianclassifier" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.algorithms.classifiers.GaussianClassifier">
<em class="property">class </em><code class="sig-name descname">GaussianClassifier</code><span class="sig-paren">(</span><em class="sig-param">training_data=None</em>, <em class="sig-param">min_samples=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.GaussianClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>A Gaussian Maximum Likelihood Classifier</p>
<dl class="method">
<dt id="spectral.algorithms.classifiers.GaussianClassifier.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">training_data=None</em>, <em class="sig-param">min_samples=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.GaussianClassifier.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the classifier and optionally trains it with training data.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>training_data</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">TrainingClassSet</span></code>):</p>
<blockquote>
<div><p>The training classes on which to train the classifier.</p>
</div></blockquote>
<p><cite>min_samples</cite> (int) [default None]:</p>
<blockquote>
<div><p>Minimum number of samples required from a training class to
include it in the classifier.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.classifiers.GaussianClassifier.classify_image">
<code class="sig-name descname">classify_image</code><span class="sig-paren">(</span><em class="sig-param">image</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.GaussianClassifier.classify_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Classifies an entire image, returning a classification map.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>image</cite> (ndarray or <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code>)</p>
<blockquote>
<div><p>The <cite>MxNxB</cite> image to classify.</p>
</div></blockquote>
</div></blockquote>
<p>Returns (ndarray):</p>
<blockquote>
<div><p>An <cite>MxN</cite> ndarray of integers specifying the class for each pixel.</p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.classifiers.GaussianClassifier.classify_spectrum">
<code class="sig-name descname">classify_spectrum</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.GaussianClassifier.classify_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Classifies a pixel into one of the trained classes.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>x</cite> (list or rank-1 ndarray):</p>
<blockquote>
<div><p>The unclassified spectrum.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><cite>classIndex</cite> (int):</p>
<blockquote>
<div><p>The index for the <code class="xref py py-class docutils literal notranslate"><span class="pre">TrainingClass</span></code>
to which <cite>x</cite> is classified.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.classifiers.GaussianClassifier.train">
<code class="sig-name descname">train</code><span class="sig-paren">(</span><em class="sig-param">training_data</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.GaussianClassifier.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Trains the classifier on the given training data.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>training_data</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">TrainingClassSet</span></code>):</p>
<blockquote>
<div><p>Data for the training classes.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="gaussianstats">
<h3>GaussianStats<a class="headerlink" href="#gaussianstats" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.algorithms.algorithms.GaussianStats">
<em class="property">class </em><code class="sig-name descname">GaussianStats</code><span class="sig-paren">(</span><em class="sig-param">mean=None</em>, <em class="sig-param">cov=None</em>, <em class="sig-param">nsamples=None</em>, <em class="sig-param">inv_cov=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.GaussianStats" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for storing Gaussian statistics for a data set.</p>
<p>Statistics stored include:</p>
<blockquote>
<div><p><cite>mean</cite>:</p>
<blockquote>
<div><p>Mean vector</p>
</div></blockquote>
<p><cite>cov</cite>:</p>
<blockquote>
<div><p>Covariance matrix</p>
</div></blockquote>
<p><cite>nsamples</cite>:</p>
<blockquote>
<div><p>Number of samples used in computing the statistics</p>
</div></blockquote>
</div></blockquote>
<p>Several derived statistics are computed on-demand (and cached) and are
available as property attributes. These include:</p>
<blockquote>
<div><p><cite>inv_cov</cite>:</p>
<blockquote>
<div><p>Inverse of the covariance</p>
</div></blockquote>
<p><cite>sqrt_cov</cite>:</p>
<blockquote>
<div><p>Matrix square root of covariance: sqrt_cov.dot(sqrt_cov) == cov</p>
</div></blockquote>
<p><cite>sqrt_inv_cov</cite>:</p>
<blockquote>
<div><p>Matrix square root of the inverse of covariance</p>
</div></blockquote>
<p><cite>log_det_cov</cite>:</p>
<blockquote>
<div><p>The log of the determinant of the covariance matrix</p>
</div></blockquote>
<p><cite>principal_components</cite>:</p>
<blockquote>
<div><p>The principal components of the data, based on mean and cov.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="kmeans">
<h3>kmeans<a class="headerlink" href="#kmeans" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.kmeans">
<code class="sig-name descname">kmeans</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">nclusters=10</em>, <em class="sig-param">max_iterations=20</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.kmeans" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs iterative clustering using the k-means algorithm.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>image</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code>):</p>
<blockquote>
<div><p>The <cite>MxNxB</cite> image on which to perform clustering.</p>
</div></blockquote>
<p><cite>nclusters</cite> (int) [default 10]:</p>
<blockquote>
<div><p>Number of clusters to create.  The number produced may be less than
<cite>nclusters</cite>.</p>
</div></blockquote>
<p><cite>max_iterations</cite> (int) [default 20]:</p>
<blockquote>
<div><p>Max number of iterations to perform.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>start_clusters</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) [default None]:</p>
<blockquote>
<div><p><cite>nclusters x B</cite> array of initial cluster centers.  If not provided,
initial cluster centers will be spaced evenly along the diagonal of
the N-dimensional bounding box of the image data.</p>
</div></blockquote>
<p><cite>compare</cite> (callable object) [default None]:</p>
<blockquote>
<div><p>Optional comparison function. <cite>compare</cite> must be a callable object
that takes 2 <cite>MxN</cite> <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> objects as its arguments
and returns non-zero when clustering is to be terminated. The two
arguments are the cluster maps for the previous and current cluster
cycle, respectively.</p>
</div></blockquote>
<p><cite>distance</cite> (callable object) [default <code class="xref py py-func docutils literal notranslate"><span class="pre">L2</span></code>]:</p>
<blockquote>
<div><p>The distance measure to use for comparison. The default is to use
<strong>L2</strong> (Euclidean) distance. For Manhattan distance, specify
<code class="xref py py-func docutils literal notranslate"><span class="pre">L1</span></code>.</p>
</div></blockquote>
<p><cite>frames</cite> (list) [default None]:</p>
<blockquote>
<div><p>If this argument is given and is a list object, each intermediate
cluster map is appended to the list.</p>
</div></blockquote>
</div></blockquote>
<p>Returns a 2-tuple containing:</p>
<blockquote>
<div><p><cite>class_map</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>An <cite>MxN</cite> array whos values are the indices of the cluster for the
corresponding element of <cite>image</cite>.</p>
</div></blockquote>
<p><cite>centers</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>An <cite>nclusters x B</cite> array of cluster centers.</p>
</div></blockquote>
</div></blockquote>
<p>Iterations are performed until clusters converge (no pixels reassigned
between iterations), <cite>maxIterations</cite> is reached, or <cite>compare</cite> returns
nonzero. If <code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code> is generated (i.e., CTRL-C pressed)
while the algorithm is executing, clusters are returned from the previously
completed iteration.</p>
</dd></dl>

</div>
<div class="section" id="linear-discriminant">
<h3>linear_discriminant<a class="headerlink" href="#linear-discriminant" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.linear_discriminant">
<code class="sig-name descname">linear_discriminant</code><span class="sig-paren">(</span><em class="sig-param">classes</em>, <em class="sig-param">whiten=True</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.linear_discriminant" title="Permalink to this definition">¶</a></dt>
<dd><p>Solve Fisher’s linear discriminant for eigenvalues and eigenvectors.</p>
<p>Usage: (L, V, Cb, Cw) = linear_discriminant(classes)</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>classes</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">TrainingClassSet</span></code>):</p>
<blockquote>
<div><p>The set of <cite>C</cite> classes to discriminate.</p>
</div></blockquote>
</div></blockquote>
<p>Returns a <cite>FisherLinearDiscriminant</cite> object containing the within/between-
class covariances, mean vector, and a callable transform to convert data to
the transform’s space.</p>
<p>This function determines the solution to the generalized eigenvalue problem</p>
<blockquote>
<div><p>Cb * x = lambda * Cw * x</p>
</div></blockquote>
<p>Since cov_w is normally invertable, the reduces to</p>
<blockquote>
<div><p>(inv(Cw) * Cb) * x = lambda * x</p>
</div></blockquote>
<p>References:</p>
<blockquote>
<div><p>Richards, J.A. &amp; Jia, X. Remote Sensing Digital Image Analysis: An
Introduction. (Springer: Berlin, 1999).</p>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="lineartransform">
<h3>LinearTransform<a class="headerlink" href="#lineartransform" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.algorithms.transforms.LinearTransform">
<em class="property">class </em><code class="sig-name descname">LinearTransform</code><span class="sig-paren">(</span><em class="sig-param">A</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.transforms.LinearTransform" title="Permalink to this definition">¶</a></dt>
<dd><p>A callable linear transform object.</p>
<p>In addition to the __call__ method, which applies the transform to given,
data, a LinearTransform object also has the following members:</p>
<blockquote>
<div><p><cite>dim_in</cite> (int):</p>
<blockquote>
<div><p>The expected length of input vectors. This will be <cite>None</cite> if the
input dimension is unknown (e.g., if the transform is a scalar).</p>
</div></blockquote>
<p><cite>dim_out</cite> (int):</p>
<blockquote>
<div><p>The length of output vectors (after linear transformation). This
will be <cite>None</cite> if the input dimension is unknown (e.g., if
the transform is a scalar).</p>
</div></blockquote>
<p><cite>dtype</cite> (numpy dtype):</p>
<blockquote>
<div><p>The numpy dtype for the output ndarray data.</p>
</div></blockquote>
</div></blockquote>
<dl class="method">
<dt id="spectral.algorithms.transforms.LinearTransform.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">X</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.transforms.LinearTransform.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the linear transformation to the given data.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>X</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> or object with <cite>transform</cite> method):</p>
<blockquote>
<div><p>If <cite>X</cite> is an ndarray, it is either an (M,N,K) array containing
M*N length-K vectors to be transformed or it is an (R,K) array
of length-K vectors to be transformed. If <cite>X</cite> is an object with
a method named <cite>transform</cite> the result of passing the
<cite>LinearTransform</cite> object to the <cite>transform</cite> method will be
returned.</p>
</div></blockquote>
</div></blockquote>
<p>Returns an (M,N,J) or (R,J) array, depending on shape of <cite>X</cite>, where J
is the length of the first dimension of the array <cite>A</cite> passed to
__init__.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.transforms.LinearTransform.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">A</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.transforms.LinearTransform.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Arguments:</p>
<blockquote>
<div><p><cite>A</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarrray</span></code>):</p>
<blockquote>
<div><p>An (J,K) array to be applied to length-K targets.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Argments:</p>
<blockquote>
<div><p><cite>pre</cite> (scalar or length-K sequence):</p>
<blockquote>
<div><p>Additive offset to be applied prior to linear transformation.</p>
</div></blockquote>
<p><cite>post</cite> (scalar or length-J sequence):</p>
<blockquote>
<div><p>An additive offset to be applied after linear transformation.</p>
</div></blockquote>
<p><cite>dtype</cite> (numpy dtype):</p>
<blockquote>
<div><p>Explicit type for transformed data.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.transforms.LinearTransform.chain">
<code class="sig-name descname">chain</code><span class="sig-paren">(</span><em class="sig-param">transform</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.transforms.LinearTransform.chain" title="Permalink to this definition">¶</a></dt>
<dd><p>Chains together two linear transforms.
If the transform <cite>f1</cite> is given by</p>
<div class="math">
<p><img src="_images/math/3c2d93b6dfc6a208fa63f256b941b68c902b5528.png" alt="F_1(X) = A_1(X + b_1) + c_1"/></p>
</div><p>and <cite>f2</cite> by</p>
<div class="math">
<p><img src="_images/math/77da5b6e9e7f4c7eb4b406187c7db48570402ca7.png" alt="F_2(X) = A_2(X + b_2) + c_2"/></p>
</div><p>then <cite>f1.chain(f2)</cite> returns a new LinearTransform, <cite>f3</cite>, whose output
is given by</p>
<div class="math">
<p><img src="_images/math/c520600fcfaddf5b2eb2e6f1c20df0d37e665886.png" alt="F_3(X) = F_2(F_1(X))"/></p>
</div></dd></dl>

</dd></dl>

</div>
<div class="section" id="mahalanobisdistanceclassifier">
<h3>MahalanobisDistanceClassifier<a class="headerlink" href="#mahalanobisdistanceclassifier" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.algorithms.classifiers.MahalanobisDistanceClassifier">
<em class="property">class </em><code class="sig-name descname">MahalanobisDistanceClassifier</code><span class="sig-paren">(</span><em class="sig-param">training_data=None</em>, <em class="sig-param">min_samples=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.MahalanobisDistanceClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>A Classifier using Mahalanobis distance for class discrimination</p>
<dl class="method">
<dt id="spectral.algorithms.classifiers.MahalanobisDistanceClassifier.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">training_data=None</em>, <em class="sig-param">min_samples=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.MahalanobisDistanceClassifier.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the classifier and optionally trains it with training data.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>training_data</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">TrainingClassSet</span></code>):</p>
<blockquote>
<div><p>The training classes on which to train the classifier.</p>
</div></blockquote>
<p><cite>min_samples</cite> (int) [default None]:</p>
<blockquote>
<div><p>Minimum number of samples required from a training class to
include it in the classifier.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.classifiers.MahalanobisDistanceClassifier.classify_image">
<code class="sig-name descname">classify_image</code><span class="sig-paren">(</span><em class="sig-param">image</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.MahalanobisDistanceClassifier.classify_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Classifies an entire image, returning a classification map.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>image</cite> (ndarray or <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code>)</p>
<blockquote>
<div><p>The <cite>MxNxB</cite> image to classify.</p>
</div></blockquote>
</div></blockquote>
<p>Returns (ndarray):</p>
<blockquote>
<div><p>An <cite>MxN</cite> ndarray of integers specifying the class for each pixel.</p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.classifiers.MahalanobisDistanceClassifier.classify_spectrum">
<code class="sig-name descname">classify_spectrum</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.MahalanobisDistanceClassifier.classify_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Classifies a pixel into one of the trained classes.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>x</cite> (list or rank-1 ndarray):</p>
<blockquote>
<div><p>The unclassified spectrum.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><cite>classIndex</cite> (int):</p>
<blockquote>
<div><p>The index for the <code class="xref py py-class docutils literal notranslate"><span class="pre">TrainingClass</span></code>
to which <cite>x</cite> is classified.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.classifiers.MahalanobisDistanceClassifier.train">
<code class="sig-name descname">train</code><span class="sig-paren">(</span><em class="sig-param">trainingData</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.MahalanobisDistanceClassifier.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Trains the classifier on the given training data.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>trainingData</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">TrainingClassSet</span></code>):</p>
<blockquote>
<div><p>Data for the training classes.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="map-class-ids">
<h3>map_class_ids<a class="headerlink" href="#map-class-ids" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.spatial.map_class_ids">
<code class="sig-name descname">map_class_ids</code><span class="sig-paren">(</span><em class="sig-param">src_class_image</em>, <em class="sig-param">dest_class_image</em>, <em class="sig-param">unlabeled=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.spatial.map_class_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a mapping between class labels in two classification images.</p>
<p>Running a classification algorithm (particularly an unsupervised one)
multiple times on the same image can yield similar results but with
different class labels (indices) for the same classes. This function
produces a mapping of class indices from one classification image to
another by finding class indices that share the most pixels between the
two classification images.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>src_class_image</cite> (ndarray):</p>
<blockquote>
<div><p>An MxN integer array of class indices. The indices in this array
will be mapped to indices in <cite>dest_class_image</cite>.</p>
</div></blockquote>
<p><cite>dest_class_image</cite> (ndarray):</p>
<blockquote>
<div><p>An MxN integer array of class indices.</p>
</div></blockquote>
<p><cite>unlabeled</cite> (int or array of ints):</p>
<blockquote>
<div><p>If this argument is provided, all pixels (in both images) will be
ignored when counting coincident pixels to determine the mapping.
If mapping a classification image to a ground truth image that has
a labeled background value, set <cite>unlabeled</cite> to that value.</p>
</div></blockquote>
</div></blockquote>
<p>Return Value:</p>
<blockquote>
<div><p>A dictionary whose keys are class indices from <cite>src_class_image</cite> and
whose values are class indices from <cite>dest_class_image</cite>.</p>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#spectral.algorithms.spatial.map_classes" title="spectral.algorithms.spatial.map_classes"><code class="xref py py-func docutils literal notranslate"><span class="pre">map_classes</span></code></a></p>
</div>
</dd></dl>

</div>
<div class="section" id="map-classes">
<h3>map_classes<a class="headerlink" href="#map-classes" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.spatial.map_classes">
<code class="sig-name descname">map_classes</code><span class="sig-paren">(</span><em class="sig-param">class_image</em>, <em class="sig-param">class_id_map</em>, <em class="sig-param">allow_unmapped=False</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.spatial.map_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Modifies class indices according to a class index mapping.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>class_image</cite>: (ndarray):</p>
<blockquote>
<div><p>An MxN array of integer class indices.</p>
</div></blockquote>
<p><cite>class_id_map</cite>: (dict):</p>
<blockquote>
<div><p>A dict whose keys are indices from <cite>class_image</cite> and whose values
are new values for the corresponding indices. This value is
usually the output of <a class="reference internal" href="#spectral.algorithms.spatial.map_class_ids" title="spectral.algorithms.spatial.map_class_ids"><code class="xref py py-func docutils literal notranslate"><span class="pre">map_class_ids</span></code></a>.</p>
</div></blockquote>
<p><cite>allow_unmapped</cite> (bool, default False):</p>
<blockquote>
<div><p>A flag indicating whether class indices can appear in <cite>class_image</cite>
without a corresponding key in <cite>class_id_map</cite>. If this value is
False and an index in the image is found without a mapping key,
a <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code> is raised. If True, the unmapped index will
appear unmodified in the output image.</p>
</div></blockquote>
</div></blockquote>
<p>Return Value:</p>
<blockquote>
<div><p>An integer-valued ndarray with same shape as <cite>class_image</cite></p>
</div></blockquote>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">spy</span><span class="o">.</span><span class="n">map_class_ids</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">gt</span><span class="p">,</span> <span class="n">unlabeled</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result_mapped</span> <span class="o">=</span> <span class="n">spy</span><span class="o">.</span><span class="n">map_classes</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#spectral.algorithms.spatial.map_class_ids" title="spectral.algorithms.spatial.map_class_ids"><code class="xref py py-func docutils literal notranslate"><span class="pre">map_class_ids</span></code></a></p>
</div>
</dd></dl>

</div>
<div class="section" id="matched-filter">
<h3>matched_filter<a class="headerlink" href="#matched-filter" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.detectors.matched_filter">
<code class="sig-name descname">matched_filter</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">target</em>, <em class="sig-param">background=None</em>, <em class="sig-param">window=None</em>, <em class="sig-param">cov=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.detectors.matched_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes a linear matched filter target detector score.</p>
<p>Usage:</p>
<blockquote>
<div><p>y = matched_filter(X, target, background)</p>
<p>y = matched_filter(X, target, window=&lt;win&gt; [, cov=&lt;cov&gt;])</p>
</div></blockquote>
<p>Given target/background means and a common covariance matrix, the matched
filter response is given by:</p>
<div class="math">
<p><img src="_images/math/20c9c2a2779214a9e4366f71e6058b877f7a2857.png" alt="y=\frac{(\mu_t-\mu_b)^T\Sigma^{-1}(x-\mu_b)}{(\mu_t-\mu_b)^T\Sigma^{-1}(\mu_t-\mu_b)}"/></p>
</div><p>where <img class="math" src="_images/math/bba4dc6f1475c69c3aee7dfaf608317264ba6d48.png" alt="\mu_t"/> is the target mean, <img class="math" src="_images/math/a3565136d9107b3df64b08768fe13a9bd5a8d79f.png" alt="\mu_b"/> is the background
mean, and <img class="math" src="_images/math/6edc5c119344e25a06e6ac4cb56f2d5e2f09a2f1.png" alt="\Sigma"/> is the covariance.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>X</cite> (numpy.ndarray):</p>
<blockquote>
<div><p>For the first calling method shown, <cite>X</cite> can be an image with
shape (R, C, B) or an ndarray of shape (R * C, B). If the
<cite>background</cite> keyword is given, it will be used for the image
background statistics; otherwise, background statistics will be
computed from <cite>X</cite>.</p>
<p>If the <cite>window</cite> keyword is given, <cite>X</cite> must be a 3-dimensional
array and background statistics will be computed for each point
in the image using a local window defined by the keyword.</p>
</div></blockquote>
<p><cite>target</cite> (ndarray):</p>
<blockquote>
<div><p>Length-K vector specifying the target to be detected.</p>
</div></blockquote>
<p><cite>background</cite> (<cite>GaussianStats</cite>):</p>
<blockquote>
<div><p>The Gaussian statistics for the background (e.g., the result
of calling <code class="xref py py-func docutils literal notranslate"><span class="pre">calc_stats</span></code> for an image). This argument is not
required if <cite>window</cite> is given.</p>
</div></blockquote>
<p><cite>window</cite> (2-tuple of odd integers):</p>
<blockquote>
<div><p>Must have the form (<cite>inner</cite>, <cite>outer</cite>), where the two values
specify the widths (in pixels) of inner and outer windows centered
about the pixel being evaulated. Both values must be odd integers.
The background mean and covariance will be estimated from pixels
in the outer window, excluding pixels within the inner window. For
example, if (<cite>inner</cite>, <cite>outer</cite>) = (5, 21), then the number of
pixels used to estimate background statistics will be
<img class="math" src="_images/math/4f3bdafd2863b618a470035befb4daeef90f1d97.png" alt="21^2 - 5^2 = 416"/>. If this argument is given, <cite>background</cite>
is not required (and will be ignored, if given).</p>
<p>The window is modified near image borders, where full, centered
windows cannot be created. The outer window will be shifted, as
needed, to ensure that the outer window still has height and width
<cite>outer</cite> (in this situation, the pixel being evaluated will not be
at the center of the outer window). The inner window will be
clipped, as needed, near image borders. For example, assume an
image with 145 rows and columns. If the window used is
(5, 21), then for the image pixel at (0, 0) (upper left corner),
the the inner window will cover <cite>image[:3, :3]</cite> and the outer
window will cover <cite>image[:21, :21]</cite>. For the pixel at (50, 1), the
inner window will cover <cite>image[48:53, :4]</cite> and the outer window
will cover <cite>image[40:51, :21]</cite>.</p>
</div></blockquote>
<p><cite>cov</cite> (ndarray):</p>
<blockquote>
<div><p>An optional covariance to use. If this parameter is given, <cite>cov</cite>
will be used for all matched filter calculations (background
covariance will not be recomputed in each window) and only the
background mean will be recomputed in each window. If the
<cite>window</cite> argument is specified, providing <cite>cov</cite> will allow the
result to be computed <em>much</em> faster.</p>
</div></blockquote>
</div></blockquote>
<p>Returns numpy.ndarray:</p>
<blockquote>
<div><p>The return value will be the matched filter scores distance) for each
pixel given.  If <cite>X</cite> has shape (R, C, K), the returned ndarray will
have shape (R, C).</p>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="matchedfilter">
<h3>MatchedFilter<a class="headerlink" href="#matchedfilter" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.algorithms.detectors.MatchedFilter">
<em class="property">class </em><code class="sig-name descname">MatchedFilter</code><span class="sig-paren">(</span><em class="sig-param">background</em>, <em class="sig-param">target</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.detectors.MatchedFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>A callable linear matched filter.</p>
<p>Given target/background means and a common covariance matrix, the matched
filter response is given by:</p>
<div class="math">
<p><img src="_images/math/20c9c2a2779214a9e4366f71e6058b877f7a2857.png" alt="y=\frac{(\mu_t-\mu_b)^T\Sigma^{-1}(x-\mu_b)}{(\mu_t-\mu_b)^T\Sigma^{-1}(\mu_t-\mu_b)}"/></p>
</div><p>where <img class="math" src="_images/math/bba4dc6f1475c69c3aee7dfaf608317264ba6d48.png" alt="\mu_t"/> is the target mean, <img class="math" src="_images/math/a3565136d9107b3df64b08768fe13a9bd5a8d79f.png" alt="\mu_b"/> is the background
mean, and <img class="math" src="_images/math/6edc5c119344e25a06e6ac4cb56f2d5e2f09a2f1.png" alt="\Sigma"/> is the covariance.</p>
<dl class="method">
<dt id="spectral.algorithms.detectors.MatchedFilter.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">X</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.detectors.MatchedFilter.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the linear transformation to the given data.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>X</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code> or object with <cite>transform</cite> method):</p>
<blockquote>
<div><p>If <cite>X</cite> is an ndarray, it is either an (M,N,K) array containing
M*N length-K vectors to be transformed or it is an (R,K) array
of length-K vectors to be transformed. If <cite>X</cite> is an object with
a method named <cite>transform</cite> the result of passing the
<cite>LinearTransform</cite> object to the <cite>transform</cite> method will be
returned.</p>
</div></blockquote>
</div></blockquote>
<p>Returns an (M,N,J) or (R,J) array, depending on shape of <cite>X</cite>, where J
is the length of the first dimension of the array <cite>A</cite> passed to
__init__.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.detectors.MatchedFilter.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">background</em>, <em class="sig-param">target</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.detectors.MatchedFilter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the filter, given background/target means and covariance.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>background</cite> (<cite>GaussianStats</cite>):</p>
<blockquote>
<div><p>The Gaussian statistics for the background (e.g., the result
of calling <code class="xref py py-func docutils literal notranslate"><span class="pre">calc_stats</span></code>).</p>
</div></blockquote>
<p><cite>target</cite> (ndarray):</p>
<blockquote>
<div><p>Length-K target mean</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.detectors.MatchedFilter.whiten">
<code class="sig-name descname">whiten</code><span class="sig-paren">(</span><em class="sig-param">X</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.detectors.MatchedFilter.whiten" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms data to the whitened space of the background.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>X</cite> (ndarray):</p>
<blockquote>
<div><p>Size (M,N,K) or (M*N,K) array of length K vectors to transform.</p>
</div></blockquote>
</div></blockquote>
<p>Returns an array of same size as <cite>X</cite> but linearly transformed to the
whitened space of the filter.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="mean-cov">
<h3>mean_cov<a class="headerlink" href="#mean-cov" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.algorithms.mean_cov">
<code class="sig-name descname">mean_cov</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">mask=None</em>, <em class="sig-param">index=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.mean_cov" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the mean and covariance of the set of vectors.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="n">cov</span><span class="p">,</span> <span class="n">S</span><span class="p">)</span> <span class="o">=</span> <span class="n">mean_cov</span><span class="p">(</span><span class="n">vectors</span> <span class="p">[,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span> <span class="p">[,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">]])</span>
</pre></div>
</div>
<p>Arguments:</p>
<blockquote>
<div><p><cite>image</cite> (ndarrray, <code class="xref py py-class docutils literal notranslate"><span class="pre">Image</span></code>, or <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Iterator</span></code>):</p>
<blockquote>
<div><p>If an ndarray, it should have shape <cite>MxNxB</cite> and the mean &amp;
covariance will be calculated for each band (third dimension).</p>
</div></blockquote>
<p><cite>mask</cite> (ndarray):</p>
<blockquote>
<div><p>If <cite>mask</cite> is specified, mean &amp; covariance will be calculated for
all pixels indicated in the mask array.  If <cite>index</cite> is specified,
all pixels in <cite>image</cite> for which <cite>mask == index</cite> will be used;
otherwise, all nonzero elements of <cite>mask</cite> will be used.</p>
</div></blockquote>
<p><cite>index</cite> (int):</p>
<blockquote>
<div><p>Specifies which value in <cite>mask</cite> to use to select pixels from
<cite>image</cite>. If not specified but <cite>mask</cite> is, then all nonzero elements
of <cite>mask</cite> will be used.</p>
</div></blockquote>
<p>If neither <cite>mask</cite> nor <cite>index</cite> are specified, all samples in <cite>vectors</cite>
will be used.</p>
</div></blockquote>
<p>Returns a 3-tuple containing:</p>
<blockquote>
<div><p><cite>mean</cite> (ndarray):</p>
<blockquote>
<div><p>The length-<cite>B</cite> mean vectors</p>
</div></blockquote>
<p><cite>cov</cite> (ndarray):</p>
<blockquote>
<div><p>The <cite>BxB</cite> unbiased estimate (dividing by N-1) of the covariance
of the vectors.</p>
</div></blockquote>
<p><cite>S</cite> (int):</p>
<blockquote>
<div><p>Number of samples used to calculate mean &amp; cov</p>
</div></blockquote>
</div></blockquote>
<p>Calculate the mean and covariance of of the given vectors. The argument
can be an Iterator, a SpyFile object, or an <cite>MxNxB</cite> array.</p>
</dd></dl>

</div>
<div class="section" id="minimum-noise-fraction-mnf">
<h3>Minimum Noise Fraction (MNF)<a class="headerlink" href="#minimum-noise-fraction-mnf" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.algorithms.mnf">
<code class="sig-name descname">mnf</code><span class="sig-paren">(</span><em class="sig-param">signal</em>, <em class="sig-param">noise</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.mnf" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes Minimum Noise Fraction / Noise-Adjusted Principal Components.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>signal</cite> (<a class="reference internal" href="#spectral.algorithms.algorithms.GaussianStats" title="spectral.algorithms.algorithms.GaussianStats"><code class="xref py py-class docutils literal notranslate"><span class="pre">GaussianStats</span></code></a>):</p>
<blockquote>
<div><p>Estimated signal statistics</p>
</div></blockquote>
<p><cite>noise</cite> (<a class="reference internal" href="#spectral.algorithms.algorithms.GaussianStats" title="spectral.algorithms.algorithms.GaussianStats"><code class="xref py py-class docutils literal notranslate"><span class="pre">GaussianStats</span></code></a>):</p>
<blockquote>
<div><p>Estimated noise statistics</p>
</div></blockquote>
</div></blockquote>
<p>Returns an <a class="reference internal" href="#spectral.algorithms.algorithms.MNFResult" title="spectral.algorithms.algorithms.MNFResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">MNFResult</span></code></a> object,
containing the Noise-Adjusted Principal Components (NAPC) and methods for
denoising or reducing dimensionality of associated data.</p>
<p>The Minimum Noise Fraction (MNF) is similar to the Principal Components
transformation with the difference that the Principal Components associated
with the MNF are ordered by descending signal-to-noise ratio (SNR) rather
than overall image variance. Note that the eigenvalues of the NAPC are
equal to one plus the SNR in the transformed space (since noise has
whitened unit variance in the NAPC coordinate space).</p>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">open_image</span><span class="p">(</span><span class="s1">&#39;92AV3C.lan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="n">calc_stats</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">noise</span> <span class="o">=</span> <span class="n">noise_from_diffs</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">117</span><span class="p">:</span> <span class="mi">137</span><span class="p">,</span> <span class="mi">85</span><span class="p">:</span> <span class="mi">122</span><span class="p">,</span> <span class="p">:])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mnfr</span> <span class="o">=</span> <span class="n">mnf</span><span class="p">(</span><span class="n">signal</span><span class="p">,</span> <span class="n">noise</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># De-noise the data by eliminating NAPC components where SNR &lt; 10.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The de-noised data will be in the original coordinate space (at</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># full dimensionality).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">denoised</span> <span class="o">=</span> <span class="n">mnfr</span><span class="o">.</span><span class="n">denoise</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">snr</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Reduce dimensionality, retaining NAPC components where SNR &gt;= 10.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reduced</span> <span class="o">=</span> <span class="n">mnfr</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">snr</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Reduce dimensionality, retaining top 50 NAPC components.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reduced</span> <span class="o">=</span> <span class="n">mnfr</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
<p>References:</p>
<blockquote>
<div><p>Lee, James B., A. Stephen Woodyatt, and Mark Berman. “Enhancement of
high spectral resolution remote-sensing data by a noise-adjusted
principal components transform.” Geoscience and Remote Sensing, IEEE
Transactions on 28.3 (1990): 295-304.</p>
</div></blockquote>
</dd></dl>

<dl class="class">
<dt id="spectral.algorithms.algorithms.MNFResult">
<em class="property">class </em><code class="sig-name descname">MNFResult</code><span class="sig-paren">(</span><em class="sig-param">signal</em>, <em class="sig-param">noise</em>, <em class="sig-param">napc</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.MNFResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Result object returned by <a class="reference internal" href="#spectral.algorithms.algorithms.mnf" title="spectral.algorithms.algorithms.mnf"><code class="xref py py-func docutils literal notranslate"><span class="pre">mnf</span></code></a>.</p>
<p>This object contains data associates with a Minimum Noise Fraction
calculation, including signal and noise statistics, as well as the
Noise-Adjusted Principal Components (NAPC). This object can be used to
denoise image data or to reduce its dimensionality.</p>
<dl class="method">
<dt id="spectral.algorithms.algorithms.MNFResult.denoise">
<code class="sig-name descname">denoise</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.MNFResult.denoise" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a de-noised version of <cite>X</cite>.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>X</cite> (np.ndarray):</p>
<blockquote>
<div><p>Data to be de-noised. Can be a single pixel or an image.</p>
</div></blockquote>
</div></blockquote>
<p>One (and only one) of the following keywords must be specified:</p>
<blockquote>
<div><p><cite>num</cite> (int):</p>
<blockquote>
<div><p>Number of Noise-Adjusted Principal Components to retain.</p>
</div></blockquote>
<p><cite>snr</cite> (float):</p>
<blockquote>
<div><p>Threshold signal-to-noise ratio (SNR) to retain.</p>
</div></blockquote>
</div></blockquote>
<p>Returns denoised image data with same shape as <cite>X</cite>.</p>
<p>Note that calling this method is equivalent to calling the
<cite>get_denoising_transform</cite> method with same keyword and applying the
returned transform to <cite>X</cite>. If you only intend to denoise data with the
same parameters multiple times, then it is more efficient to get the
denoising transform and reuse it, rather than calling this method
multilple times.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.MNFResult.get_denoising_transform">
<code class="sig-name descname">get_denoising_transform</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.MNFResult.get_denoising_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a function for denoising image data.</p>
<p>One (and only one) of the following keywords must be specified:</p>
<blockquote>
<div><p><cite>num</cite> (int):</p>
<blockquote>
<div><p>Number of Noise-Adjusted Principal Components to retain.</p>
</div></blockquote>
<p><cite>snr</cite> (float):</p>
<blockquote>
<div><p>Threshold signal-to-noise ratio (SNR) to retain.</p>
</div></blockquote>
</div></blockquote>
<p>Returns a callable <a class="reference internal" href="#spectral.algorithms.transforms.LinearTransform" title="spectral.algorithms.transforms.LinearTransform"><code class="xref py py-class docutils literal notranslate"><span class="pre">LinearTransform</span></code></a>
object for denoising image data.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.MNFResult.get_reduction_transform">
<code class="sig-name descname">get_reduction_transform</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.MNFResult.get_reduction_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduces dimensionality of image data.</p>
<p>One (and only one) of the following keywords must be specified:</p>
<blockquote>
<div><p><cite>num</cite> (int):</p>
<blockquote>
<div><p>Number of Noise-Adjusted Principal Components to retain.</p>
</div></blockquote>
<p><cite>snr</cite> (float):</p>
<blockquote>
<div><p>Threshold signal-to-noise ratio (SNR) to retain.</p>
</div></blockquote>
</div></blockquote>
<p>Returns a callable <a class="reference internal" href="#spectral.algorithms.transforms.LinearTransform" title="spectral.algorithms.transforms.LinearTransform"><code class="xref py py-class docutils literal notranslate"><span class="pre">LinearTransform</span></code></a>
object for reducing the dimensionality of image data.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.MNFResult.num_with_snr">
<code class="sig-name descname">num_with_snr</code><span class="sig-paren">(</span><em class="sig-param">snr</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.MNFResult.num_with_snr" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of components with SNR &gt;= <cite>snr</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.MNFResult.reduce">
<code class="sig-name descname">reduce</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.MNFResult.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduces dimensionality of image data.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>X</cite> (np.ndarray):</p>
<blockquote>
<div><p>Data to be reduced. Can be a single pixel or an image.</p>
</div></blockquote>
</div></blockquote>
<p>One (and only one) of the following keywords must be specified:</p>
<blockquote>
<div><p><cite>num</cite> (int):</p>
<blockquote>
<div><p>Number of Noise-Adjusted Principal Components to retain.</p>
</div></blockquote>
<p><cite>snr</cite> (float):</p>
<blockquote>
<div><p>Threshold signal-to-noise ratio (SNR) to retain.</p>
</div></blockquote>
</div></blockquote>
<p>Returns a verions of <cite>X</cite> with reduced dimensionality.</p>
<p>Note that calling this method is equivalent to calling the
<cite>get_reduction_transform</cite> method with same keyword and applying the
returned transform to <cite>X</cite>. If you intend to denoise data with the
same parameters multiple times, then it is more efficient to get the
reduction transform and reuse it, rather than calling this method
multilple times.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="msam">
<h3>msam<a class="headerlink" href="#msam" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.algorithms.msam">
<code class="sig-name descname">msam</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">members</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.msam" title="Permalink to this definition">¶</a></dt>
<dd><p>Modified SAM scores according to Oshigami, et al [1]. Endmembers are
mean-subtracted prior to spectral angle calculation. Results are
normalized such that the maximum value of 1 corresponds to a perfect match
(zero spectral angle).</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>data</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code>):</p>
<blockquote>
<div><p>An <cite>MxNxB</cite> image for which spectral angles will be calculated.</p>
</div></blockquote>
<p><cite>members</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p><cite>CxB</cite> array of spectral endmembers.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><cite>MxNxC</cite> array of MSAM scores with maximum value of 1 corresponding
to a perfect match (zero spectral angle).</p>
</div></blockquote>
<p>Calculates the spectral angles between each vector in data and each of the
endmembers.  The output of this function (angles) can be used to classify
the data by minimum spectral angle by calling argmax(angles).</p>
<p>References:</p>
<p>[1] Shoko Oshigami, Yasushi Yamaguchi, Tatsumi Uezato, Atsushi Momose,
Yessy Arvelyna, Yuu Kawakami, Taro Yajima, Shuichi Miyatake, and
Anna Nguno. 2013. Mineralogical mapping of southern Namibia by application
of continuum-removal MSAM method to the HyMap data. Int. J. Remote Sens.
34, 15 (August 2013), 5282-5295.</p>
</dd></dl>

</div>
<div class="section" id="ndvi">
<h3>ndvi<a class="headerlink" href="#ndvi" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.algorithms.ndvi">
<code class="sig-name descname">ndvi</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">red</em>, <em class="sig-param">nir</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.ndvi" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates Normalized Difference Vegetation Index (NDVI).</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>data</cite> (ndarray or <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code>):</p>
<blockquote>
<div><p>The array or SpyFile for which to calculate the index.</p>
</div></blockquote>
<p><cite>red</cite> (int or int range):</p>
<blockquote>
<div><p>Index of the red band or an index range for multiple bands.</p>
</div></blockquote>
<p><cite>nir</cite> (int or int range):</p>
<blockquote>
<div><p>An integer index of the near infrared band or an index range for
multiple bands.</p>
</div></blockquote>
</div></blockquote>
<p>Returns an ndarray:</p>
<blockquote>
<div><p>An array containing NDVI values in the range [-1.0, 1.0] for each
corresponding element of data.</p>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="noise-from-diffs">
<h3>noise_from_diffs<a class="headerlink" href="#noise-from-diffs" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.algorithms.noise_from_diffs">
<code class="sig-name descname">noise_from_diffs</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">direction='lowerright'</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.noise_from_diffs" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates noise statistcs by taking differences of adjacent pixels.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>X</cite> (np.ndarray):</p>
<blockquote>
<div><p>The data from which to estimage noise statistics. <cite>X</cite> should have
shape <cite>(nrows, ncols, nbands</cite>).</p>
</div></blockquote>
<p><cite>direction</cite> (str, default “lowerright”):</p>
<blockquote>
<div><p>The pixel direction along which to calculate pixel differences.
Must be one of the following:</p>
<blockquote>
<div><dl class="simple">
<dt>‘lowerright’:</dt><dd><p>Take difference with pixel diagonally to lower right</p>
</dd>
<dt>‘lowerleft’:</dt><dd><p>Take difference with pixel diagonally to lower right</p>
</dd>
<dt>‘right’:</dt><dd><p>Take difference with pixel to the right</p>
</dd>
<dt>‘lower’:</dt><dd><p>Take differenece with pixel below</p>
</dd>
</dl>
</div></blockquote>
</div></blockquote>
</div></blockquote>
<p>Returns a <a class="reference internal" href="#spectral.algorithms.algorithms.GaussianStats" title="spectral.algorithms.algorithms.GaussianStats"><code class="xref py py-class docutils literal notranslate"><span class="pre">GaussianStats</span></code></a> object.</p>
</dd></dl>

</div>
<div class="section" id="orthogonalize">
<h3>orthogonalize<a class="headerlink" href="#orthogonalize" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.algorithms.orthogonalize">
<code class="sig-name descname">orthogonalize</code><span class="sig-paren">(</span><em class="sig-param">vecs</em>, <em class="sig-param">start=0</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.orthogonalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs Gram-Schmidt Orthogonalization on a set of vectors.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>vecs</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>The set of vectors for which an orthonormal basis will be created.
If there are <cite>C</cite> vectors of length <cite>B</cite>, <cite>vecs</cite> should be <cite>CxB</cite>.</p>
</div></blockquote>
<p><cite>start</cite> (int) [default 0]:</p>
<blockquote>
<div><p>If <cite>start</cite> &gt; 0, then <cite>vecs[start]</cite> will be assumed to already be
orthonormal.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p>A new <cite>CxB</cite> containing an orthonormal basis for the given vectors.</p>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="perceptronclassifier">
<h3>PerceptronClassifier<a class="headerlink" href="#perceptronclassifier" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.algorithms.classifiers.PerceptronClassifier">
<em class="property">class </em><code class="sig-name descname">PerceptronClassifier</code><span class="sig-paren">(</span><em class="sig-param">layers</em>, <em class="sig-param">k=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.PerceptronClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>A multi-layer perceptron classifier with backpropagation learning.</p>
<p>Multi-layer perceptrons often require many (i.e., thousands) of iterations
through the traning data to converge on a solution. Therefore, it is not
recommended to attempt training a network on full-dimensional hyperspectral
data or even on a full set of image pixels. It is likely preferable to
first train the network on a subset of the data, then retrain the network
(starting with network weights from initial training) on the full data
set.</p>
<p>Example usage: Train an MLP with 20 samples from each training class after
performing dimensionality reduction:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">classes</span> <span class="o">=</span> <span class="n">create_training_classes</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">gt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span> <span class="o">=</span> <span class="n">linear_discriminant</span><span class="p">(</span><span class="n">classes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xdata</span> <span class="o">=</span> <span class="n">fld</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">classes</span> <span class="o">=</span> <span class="n">create_training_classes</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">gt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nfeatures</span> <span class="o">=</span> <span class="n">xdata</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nclasses</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">classes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">PerceptronClassifier</span><span class="p">([</span><span class="n">nfeatures</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">nclasses</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">classes</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">accuracy</span><span class="o">=</span><span class="mf">100.</span><span class="p">,</span> <span class="n">batch</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">momentum</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">classify</span><span class="p">(</span><span class="n">xdata</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="spectral.algorithms.classifiers.PerceptronClassifier.classify">
<code class="sig-name descname">classify</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.PerceptronClassifier.classify" title="Permalink to this definition">¶</a></dt>
<dd><p>Classifies the given sample.
This has the same result as calling input and rounding the result.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.classifiers.PerceptronClassifier.classify_image">
<code class="sig-name descname">classify_image</code><span class="sig-paren">(</span><em class="sig-param">image</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.PerceptronClassifier.classify_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Classifies an entire image, returning a classification map.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>image</cite> (ndarray or <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code>)</p>
<blockquote>
<div><p>The <cite>MxNxB</cite> image to classify.</p>
</div></blockquote>
</div></blockquote>
<p>Returns (ndarray):</p>
<blockquote>
<div><p>An <cite>MxN</cite> ndarray of integers specifying the class for each pixel.</p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.classifiers.PerceptronClassifier.classify_spectrum">
<code class="sig-name descname">classify_spectrum</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.PerceptronClassifier.classify_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Classifies a pixel into one of the trained classes.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>x</cite> (list or rank-1 ndarray):</p>
<blockquote>
<div><p>The unclassified spectrum.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><cite>classIndex</cite> (int):</p>
<blockquote>
<div><p>The index for the <code class="xref py py-class docutils literal notranslate"><span class="pre">TrainingClass</span></code>
to which <cite>x</cite> is classified.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.classifiers.PerceptronClassifier.input">
<code class="sig-name descname">input</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">clip=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.PerceptronClassifier.input" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets Perceptron input, activates neurons and sets &amp; returns output.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>x</cite> (sequence):</p>
<blockquote>
<div><p>Inputs to input layer. Should not include a bias input.</p>
</div></blockquote>
<p><cite>clip</cite> (float &gt;= 0):</p>
<blockquote>
<div><p>Optional clipping value to limit sigmoid output. The sigmoid
function has output in the range (0, 1). If the <cite>clip</cite> argument
is set to <cite>a</cite> then all neuron outputs for the layer will be
constrained to the range [a, 1 - a]. This can improve perceptron
learning rate in some situations.</p>
</div></blockquote>
</div></blockquote>
<p>For classifying samples, call <cite>classify</cite> instead of <cite>input</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.classifiers.PerceptronClassifier.train">
<code class="sig-name descname">train</code><span class="sig-paren">(</span><em class="sig-param">training_data</em>, <em class="sig-param">samples_per_class=0</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.classifiers.PerceptronClassifier.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Trains the Perceptron on the training data.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>training_data</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">TrainingClassSet</span></code>):</p>
<blockquote>
<div><p>Data for the training classes.</p>
</div></blockquote>
<p><cite>samples_per_class</cite> (int):</p>
<blockquote>
<div><p>Maximum number of training observations to user from each
class in <cite>training_data</cite>. If this argument is not provided,
all training data is used.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p><cite>accuracy</cite> (float):</p>
<blockquote>
<div><p>The percent training accuracy at which to terminate training, if
the maximum number of iterations are not reached first. This
value can be set greater than 100 to force a specified number of
training iterations to be performed (e.g., to continue reducing
the error term after 100% classification accuracy has been
achieved.</p>
</div></blockquote>
<p><cite>rate</cite> (float):</p>
<blockquote>
<div><p>The perceptron learning rate (typically in the range (0, 1]).</p>
</div></blockquote>
<p><cite>momentum</cite> (float):</p>
<blockquote>
<div><p>The perceptron learning momentum term, which specifies the
fraction of the previous update value that should be added to
the current update term. The value should be in the range [0, 1).</p>
</div></blockquote>
<p><cite>batch</cite> (positive integer):</p>
<blockquote>
<div><p>Specifies how many samples should be evaluated before an update
is made to the perceptron weights. A value of 0 indicates batch
updates should be performed (evaluate all training inputs prior
to updating). Otherwise, updates will be aggregated for every
<cite>batch</cite> inputs (i.e., <cite>batch</cite> == 1 is stochastic learning).</p>
</div></blockquote>
<p><cite>clip</cite> (float &gt;= 0):</p>
<blockquote>
<div><p>Optional clipping value to limit sigmoid output during training.
The sigmoid function has output in the range (0, 1). If the
<cite>clip</cite> argument is set to <cite>a</cite> then all neuron outputs for the
layer will be constrained to the range [a, 1 - a]. This can
improve perceptron learning rate in some situations.</p>
<p>After training the perceptron with a clipping value, <cite>train</cite> can
be called again with clipping set to 0 to continue reducing the
training error.</p>
</div></blockquote>
<p><cite>on_iteration</cite> (callable):</p>
<blockquote>
<div><p>A callable object that accepts the perceptron as input and
returns bool. If this argument is set, the object will be called
at the end of each training iteration with the perceptron as its
argument. If the callable returns True, training will terminate.</p>
</div></blockquote>
<p><cite>stdout</cite>:</p>
<blockquote>
<div><p>An object with a <cite>write</cite> method that can be set to redirect
training status messages somewhere other than stdout. To
suppress output, set <cite>stdout</cite> to None.</p>
</div></blockquote>
</div></blockquote>
<p>Return value:</p>
<blockquote>
<div><p>Returns True if desired accuracy was achieved.</p>
</div></blockquote>
<p>Neural networks can require many iterations through a data set to
converge. If convergence slows (as indicated by small changes in
residual error), training can be terminated by pressing CTRL-C, which
will preserve the network weights from the previous training iteration.
<cite>train</cite> can then be called again with altered training parameters
(e.g., increased learning rate or momentum) to increase the convergence
rate.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="pixel-purity-index-ppi">
<h3>Pixel Purity Index (PPI)<a class="headerlink" href="#pixel-purity-index-ppi" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.algorithms.ppi">
<code class="sig-name descname">ppi</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">niters</em>, <em class="sig-param">threshold=0</em>, <em class="sig-param">centered=False</em>, <em class="sig-param">start=None</em>, <em class="sig-param">display=0</em>, <em class="sig-param">**imshow_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.ppi" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pixel purity indices for an image.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>X</cite> (ndarray):</p>
<blockquote>
<div><p>Image data for which to calculate pixel purity indices</p>
</div></blockquote>
<p><cite>niters</cite> (int):</p>
<blockquote>
<div><p>Number of iterations to perform. Each iteration corresponds to a
projection of the image data onto a random unit vector.</p>
</div></blockquote>
<p><cite>threshold</cite> (numeric):</p>
<blockquote>
<div><p>If this value is zero, only the two most extreme pixels will have
their indices incremented for each random vector. If the value is
greater than zero, then all pixels whose projections onto the
random vector are with <cite>threshold</cite> data units of either of the two
extreme pixels will also have their indices incremented.</p>
</div></blockquote>
<p><cite>centered</cite> (bool):</p>
<blockquote>
<div><p>If True, then the pixels in X are assumed to have their mean
already subtracted; otherwise, the mean of <cite>X</cite> will be computed
and subtracted prior to computing the purity indices.</p>
</div></blockquote>
<p><cite>start</cite> (ndarray):</p>
<blockquote>
<div><p>An optional array of initial purity indices. This can be used to
continue computing PPI values after a previous call to <cite>ppi</cite> (i.e.,
set <cite>start</cite> equal to the return value from a previou call to <cite>ppi</cite>.
This should be an integer-valued array whose dimensions are equal
to the first two dimensions of <cite>X</cite>.</p>
</div></blockquote>
<p><cite>display</cite> (integer):</p>
<blockquote>
<div><p>If set to a postive integer, a <a class="reference internal" href="#spectral.graphics.spypylab.ImageView" title="spectral.graphics.spypylab.ImageView"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageView</span></code></a>
window will be opened and dynamically display PPI values as the
function iterates. The value specifies the number of PPI iterations
between display updates. It is recommended to use a value around
100 or higher. If the <cite>stretch</cite> keyword (see <a class="reference internal" href="#spectral.graphics.graphics.get_rgb" title="spectral.graphics.graphics.get_rgb"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_rgb</span></code></a>
for meaning) is not provided, a default stretch of (0.99, 0.999)
is used.</p>
</div></blockquote>
</div></blockquote>
<p>Return value:</p>
<blockquote>
<div><p>An ndarray of integers that represent the pixel purity indices of the
input image. The return array will have dimensions equal to the first
two dimensions of the input image.</p>
</div></blockquote>
<p>Keyword Arguments:</p>
<blockquote>
<div><p>Any keyword accepted by <a class="reference internal" href="#spectral.graphics.spypylab.imshow" title="spectral.graphics.spypylab.imshow"><code class="xref py py-func docutils literal notranslate"><span class="pre">imshow</span></code></a>.
These keywords will be passed to the image display and only have an
effect if the <cite>display</cite> argument is nonzero.</p>
</div></blockquote>
<p>This function can be interruped with a KeyboardInterrupt (ctrl-C), in which
case, the most recent value of the PPI array will be returned. This can be
used in conjunction with the <cite>display</cite> argument to view the progression of
the PPI values until they appear stable, then terminate iteration using
ctrl-C.</p>
<p>References:</p>
<p>Boardman J.W., Kruse F.A, and Green R.O., “Mapping Target Signatures via
Partial Unmixing of AVIRIS Data,” Pasadena, California, USA, 23 Jan 1995,
URI: <a class="reference external" href="http://hdl.handle.net/2014/33635">http://hdl.handle.net/2014/33635</a></p>
</dd></dl>

</div>
<div class="section" id="principal-components">
<h3>principal_components<a class="headerlink" href="#principal-components" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.principal_components">
<code class="sig-name descname">principal_components</code><span class="sig-paren">(</span><em class="sig-param">image</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.principal_components" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Principal Component eigenvalues &amp; eigenvectors for an image.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pc</span> <span class="o">=</span> <span class="n">principal_components</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</pre></div>
</div>
<p>Arguments:</p>
<blockquote>
<div><p><cite>image</cite> (ndarray, <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GaussianStats</span></code>):</p>
<blockquote>
<div><p>An <cite>MxNxB</cite> image</p>
</div></blockquote>
</div></blockquote>
<p>Returns a <a class="reference internal" href="#spectral.algorithms.algorithms.PrincipalComponents" title="spectral.algorithms.algorithms.PrincipalComponents"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrincipalComponents</span></code></a>
object with the following members:</p>
<blockquote>
<div><p><cite>eigenvalues</cite>:</p>
<blockquote>
<div><p>A length B array of eigenvalues</p>
</div></blockquote>
<p><cite>eigenvectors</cite>:</p>
<blockquote>
<div><p>A <cite>BxB</cite> array of normalized eigenvectors</p>
</div></blockquote>
<p><cite>stats</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">GaussianStats</span></code>):</p>
<blockquote>
<div><p>A statistics object containing <cite>mean</cite>, <cite>cov</cite>, and <cite>nsamples</cite>.</p>
</div></blockquote>
<p><cite>transform</cite>:</p>
<blockquote>
<div><p>A callable function to transform data to the space of the
principal components.</p>
</div></blockquote>
<p><cite>reduce</cite>:</p>
<blockquote>
<div><p>A method to reduce the number of eigenvalues.</p>
</div></blockquote>
<p><cite>denoise</cite>:</p>
<blockquote>
<div><p>A callable function to denoise data using a reduced set of
principal components.</p>
</div></blockquote>
<p><cite>get_denoising_transform</cite>:</p>
<blockquote>
<div><p>A callable function that returns a function for denoising data.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="principalcomponents">
<h3>PrincipalComponents<a class="headerlink" href="#principalcomponents" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.algorithms.algorithms.PrincipalComponents">
<em class="property">class </em><code class="sig-name descname">PrincipalComponents</code><span class="sig-paren">(</span><em class="sig-param">vals</em>, <em class="sig-param">vecs</em>, <em class="sig-param">stats</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.PrincipalComponents" title="Permalink to this definition">¶</a></dt>
<dd><p>An object for storing a data set’s principal components.  The
object has the following members:</p>
<blockquote>
<div><p><cite>eigenvalues</cite>:</p>
<blockquote>
<div><p>A length B array of eigenvalues sorted in descending order</p>
</div></blockquote>
<p><cite>eigenvectors</cite>:</p>
<blockquote>
<div><p>A <cite>BxB</cite> array of normalized eigenvectors (in columns)</p>
</div></blockquote>
<p><cite>stats</cite> (<a class="reference internal" href="#spectral.algorithms.algorithms.GaussianStats" title="spectral.algorithms.algorithms.GaussianStats"><code class="xref py py-class docutils literal notranslate"><span class="pre">GaussianStats</span></code></a>):</p>
<blockquote>
<div><p>A statistics object containing <cite>mean</cite>, <cite>cov</cite>, and <cite>nsamples</cite>.</p>
</div></blockquote>
<p><cite>transform</cite>:</p>
<blockquote>
<div><p>A callable function to transform data to the space of the
principal components.</p>
</div></blockquote>
<p><cite>reduce</cite>:</p>
<blockquote>
<div><p>A method to return a reduced set of principal components based
on either a fixed number of components or a fraction of total
variance.</p>
</div></blockquote>
<p><cite>denoise</cite>:</p>
<blockquote>
<div><p>A callable function to denoise data using a reduced set of
principal components.</p>
</div></blockquote>
<p><cite>get_denoising_transform</cite>:</p>
<blockquote>
<div><p>A callable function that returns a function for denoising data.</p>
</div></blockquote>
</div></blockquote>
<dl class="method">
<dt id="spectral.algorithms.algorithms.PrincipalComponents.denoise">
<code class="sig-name descname">denoise</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.PrincipalComponents.denoise" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a de-noised version of <cite>X</cite>.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>X</cite> (np.ndarray):</p>
<blockquote>
<div><p>Data to be de-noised. Can be a single pixel or an image.</p>
</div></blockquote>
</div></blockquote>
<p>Keyword Arguments (one of the following must be specified):</p>
<blockquote>
<div><p><cite>num</cite> (integer):</p>
<blockquote>
<div><p>Number of eigenvalues/eigenvectors to use.  The top <cite>num</cite>
eigenvalues will be used.</p>
</div></blockquote>
<p><cite>eigs</cite> (list):</p>
<blockquote>
<div><p>A list of indices of eigenvalues/eigenvectors to be used.</p>
</div></blockquote>
<p><cite>fraction</cite> (float):</p>
<blockquote>
<div><p>The fraction of total image variance to retain.  Eigenvalues
will be included (starting from greatest to smallest) until
<cite>fraction</cite> of total image variance is retained.</p>
</div></blockquote>
</div></blockquote>
<p>Returns denoised image data with same shape as <cite>X</cite>.</p>
<p>Note that calling this method is equivalent to calling the
<cite>get_denoising_transform</cite> method with same keyword and applying the
returned transform to <cite>X</cite>. If you only intend to denoise data with the
same parameters multiple times, then it is more efficient to get the
denoising transform and reuse it, rather than calling this method
multilple times.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.PrincipalComponents.get_denoising_transform">
<code class="sig-name descname">get_denoising_transform</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.PrincipalComponents.get_denoising_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a function for denoising image data.</p>
<p>Keyword Arguments (one of the following must be specified):</p>
<blockquote>
<div><p><cite>num</cite> (integer):</p>
<blockquote>
<div><p>Number of eigenvalues/eigenvectors to use.  The top <cite>num</cite>
eigenvalues will be used.</p>
</div></blockquote>
<p><cite>eigs</cite> (list):</p>
<blockquote>
<div><p>A list of indices of eigenvalues/eigenvectors to be used.</p>
</div></blockquote>
<p><cite>fraction</cite> (float):</p>
<blockquote>
<div><p>The fraction of total image variance to retain.  Eigenvalues
will be included (starting from greatest to smallest) until
<cite>fraction</cite> of total image variance is retained.</p>
</div></blockquote>
</div></blockquote>
<p>Returns a callable <a class="reference internal" href="#spectral.algorithms.transforms.LinearTransform" title="spectral.algorithms.transforms.LinearTransform"><code class="xref py py-class docutils literal notranslate"><span class="pre">LinearTransform</span></code></a>
object for denoising image data.</p>
</dd></dl>

<dl class="method">
<dt id="spectral.algorithms.algorithms.PrincipalComponents.reduce">
<code class="sig-name descname">reduce</code><span class="sig-paren">(</span><em class="sig-param">N=0</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.PrincipalComponents.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduces the number of principal components.</p>
<p>Keyword Arguments (one of the following must be specified):</p>
<blockquote>
<div><p><cite>num</cite> (integer):</p>
<blockquote>
<div><p>Number of eigenvalues/eigenvectors to retain.  The top <cite>num</cite>
eigenvalues will be retained.</p>
</div></blockquote>
<p><cite>eigs</cite> (list):</p>
<blockquote>
<div><p>A list of indices of eigenvalues/eigenvectors to be retained.</p>
</div></blockquote>
<p><cite>fraction</cite> (float):</p>
<blockquote>
<div><p>The fraction of total image variance to retain.  Eigenvalues
will be retained (starting from greatest to smallest) until
<cite>fraction</cite> of total image variance is retained.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="rx-anomaly-detector">
<h3>RX Anomaly Detector<a class="headerlink" href="#rx-anomaly-detector" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.detectors.rx">
<code class="sig-name descname">rx</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">background=None</em>, <em class="sig-param">window=None</em>, <em class="sig-param">cov=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.detectors.rx" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes RX anomaly detector scores.</p>
<p>Usage:</p>
<blockquote>
<div><p>y = rx(X [, background=bg])</p>
<p>y = rx(X, window=(inner, outer) [, cov=C])</p>
</div></blockquote>
<p>The RX anomaly detector produces a detection statistic equal to the 
squared Mahalanobis distance of a spectrum from a background distribution
according to</p>
<div class="math">
<p><img src="_images/math/21e801746864c76b57574f960ac4edd3ba626c8b.png" alt="y=(x-\mu_b)^T\Sigma^{-1}(x-\mu_b)"/></p>
</div><p>where <cite>x</cite> is the pixel spectrum, <img class="math" src="_images/math/a3565136d9107b3df64b08768fe13a9bd5a8d79f.png" alt="\mu_b"/> is the background
mean, and <img class="math" src="_images/math/6edc5c119344e25a06e6ac4cb56f2d5e2f09a2f1.png" alt="\Sigma"/> is the background covariance.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>X</cite> (numpy.ndarray):</p>
<blockquote>
<div><p>For the first calling method shown, <cite>X</cite> can be an image with
shape (R, C, B) or an ndarray of shape (R * C, B). If the
<cite>background</cite> keyword is given, it will be used for the image
background statistics; otherwise, background statistics will be
computed from <cite>X</cite>.</p>
<p>If the <cite>window</cite> keyword is given, <cite>X</cite> must be a 3-dimensional
array and background statistics will be computed for each point
in the image using a local window defined by the keyword.</p>
</div></blockquote>
<p><cite>background</cite> (<cite>GaussianStats</cite>):</p>
<blockquote>
<div><p>The Gaussian statistics for the background (e.g., the result
of calling <code class="xref py py-func docutils literal notranslate"><span class="pre">calc_stats</span></code>). If no background stats are
provided, they will be estimated based on data passed to the
detector.</p>
</div></blockquote>
<p><cite>window</cite> (2-tuple of odd integers):</p>
<blockquote>
<div><p>Must have the form (<cite>inner</cite>, <cite>outer</cite>), where the two values
specify the widths (in pixels) of inner and outer windows centered
about the pixel being evaulated. Both values must be odd integers.
The background mean and covariance will be estimated from pixels
in the outer window, excluding pixels within the inner window. For
example, if (<cite>inner</cite>, <cite>outer</cite>) = (5, 21), then the number of
pixels used to estimate background statistics will be
<img class="math" src="_images/math/4f3bdafd2863b618a470035befb4daeef90f1d97.png" alt="21^2 - 5^2 = 416"/>.</p>
<p>The window are modified near image borders, where full, centered
windows cannot be created. The outer window will be shifted, as
needed, to ensure that the outer window still has height and width
<cite>outer</cite> (in this situation, the pixel being evaluated will not be
at the center of the outer window). The inner window will be
clipped, as needed, near image borders. For example, assume an
image with 145 rows and columns. If the window used is
(5, 21), then for the image pixel at (0, 0) (upper left corner),
the the inner window will cover <cite>image[:3, :3]</cite> and the outer
window will cover <cite>image[:21, :21]</cite>. For the pixel at (50, 1), the
inner window will cover <cite>image[48:53, :4]</cite> and the outer window
will cover <cite>image[40:51, :21]</cite>.</p>
</div></blockquote>
<p><cite>cov</cite> (ndarray):</p>
<blockquote>
<div><p>An optional covariance to use. If this parameter is given, <cite>cov</cite>
will be used for all RX calculations (background covariance
will not be recomputed in each window) and only the background
mean will be recomputed in each window.</p>
</div></blockquote>
</div></blockquote>
<p>Returns numpy.ndarray:</p>
<blockquote>
<div><p>The return value will be the RX detector score (squared Mahalanobis
distance) for each pixel given.  If <cite>X</cite> has shape (R, C, B), the
returned ndarray will have shape (R, C)..</p>
</div></blockquote>
<p>References:</p>
<p>Reed, I.S. and Yu, X., “Adaptive multiple-band CFAR detection of an optical
pattern with unknown spectral distribution,” IEEE Trans. Acoust.,
Speech, Signal Processing, vol. 38, pp. 1760-1770, Oct. 1990.</p>
</dd></dl>

</div>
<div class="section" id="spectral-angles">
<h3>spectral_angles<a class="headerlink" href="#spectral-angles" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.algorithms.spectral_angles">
<code class="sig-name descname">spectral_angles</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">members</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.spectral_angles" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates spectral angles with respect to given set of spectra.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>data</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code>):</p>
<blockquote>
<div><p>An <cite>MxNxB</cite> image for which spectral angles will be calculated.</p>
</div></blockquote>
<p><cite>members</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p><cite>CxB</cite> array of spectral endmembers.</p>
</div></blockquote>
</div></blockquote>
<p>Returns:</p>
<blockquote>
<div><p><cite>MxNxC</cite> array of spectral angles.</p>
</div></blockquote>
<p>Calculates the spectral angles between each vector in data and each of the
endmembers.  The output of this function (angles) can be used to classify
the data by minimum spectral angle by calling argmin(angles).</p>
</dd></dl>

</div>
<div class="section" id="spectrallibrary">
<h3>SpectralLibrary<a class="headerlink" href="#spectrallibrary" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt>
<em class="property">class </em><code class="sig-name descname">SpectralLibrary</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">header=None</em>, <em class="sig-param">params=None</em><span class="sig-paren">)</span></dt>
<dd><p>The envi.SpectralLibrary class holds data contained in an ENVI-formatted
spectral library file (.sli files), which stores data as specified by a
corresponding .hdr header file.  The primary members of an
Envi.SpectralLibrary object are:</p>
<blockquote>
<div><p><cite>spectra</cite> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):</p>
<blockquote>
<div><p>A subscriptable array of all spectra in the library. <cite>spectra</cite> will
have shape <cite>CxB</cite>, where <cite>C</cite> is the number of spectra in the library
and <cite>B</cite> is the number of bands for each spectrum.</p>
</div></blockquote>
<p><cite>names</cite> (list of str):</p>
<blockquote>
<div><p>A length-<cite>C</cite> list of names corresponding to the spectra.</p>
</div></blockquote>
<p><cite>bands</cite> (<a class="reference internal" href="#spectral.BandInfo" title="spectral.BandInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.BandInfo</span></code></a>):</p>
<blockquote>
<div><p>Spectral bands associated with the library spectra.</p>
</div></blockquote>
</div></blockquote>
<dl class="method">
<dt>
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param">file_basename</em>, <em class="sig-param">description=None</em><span class="sig-paren">)</span></dt>
<dd><p>Saves the spectral library to a library file.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>file_basename</cite> (str):</p>
<blockquote>
<div><p>Name of the file (without extension) to save.</p>
</div></blockquote>
<p><cite>description</cite> (str):</p>
<blockquote>
<div><p>Optional text description of the library.</p>
</div></blockquote>
</div></blockquote>
<p>This method creates two files: <cite>file_basename</cite>.hdr and
<cite>file_basename</cite>.sli.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="transform-image">
<h3>transform_image<a class="headerlink" href="#transform-image" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.io.spyfile.transform_image">
<code class="sig-name descname">transform_image</code><span class="sig-paren">(</span><em class="sig-param">transform</em>, <em class="sig-param">img</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.io.spyfile.transform_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a linear transform to an image.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>transform</cite> (ndarray or LinearTransform):</p>
<blockquote>
<div><p>The <cite>CxB</cite> linear transform to apply.</p>
</div></blockquote>
<p><cite>img</cite> (ndarray or <a class="reference internal" href="#spectral.SpyFile" title="spectral.SpyFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.SpyFile</span></code></a>):</p>
<blockquote>
<div><p>The <cite>MxNxB</cite> image to be transformed.</p>
</div></blockquote>
</div></blockquote>
<p>Returns (ndarray or :class:spectral.spyfile.TransformedImage`):</p>
<blockquote>
<div><p>The transformed image.</p>
</div></blockquote>
<p>If <cite>img</cite> is an ndarray, then a <cite>MxNxC</cite> ndarray is returned.  If <cite>img</cite> is
a <a class="reference internal" href="#spectral.SpyFile" title="spectral.SpyFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.SpyFile</span></code></a>, then a
<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.spyfile.TransformedImage</span></code> is returned.</p>
</dd></dl>

</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="spysettings">
<h3>SpySettings<a class="headerlink" href="#spysettings" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="spectral.config.SpySettings">
<em class="property">class </em><code class="sig-name descname">SpySettings</code><a class="headerlink" href="#spectral.config.SpySettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Run-time settings for the <cite>spectral</cite> module.</p>
<p>After importing <cite>spectral</cite>, the settings object is referenced as
<cite>spectral.settings</cite>.</p>
<p>Noteworthy members:</p>
<blockquote>
<div><p><cite>WX_GL_DEPTH_SIZE</cite> (integer, default 24):</p>
<blockquote>
<div><p>Sets the depth (in number of bits) for the OpenGL depth buffer.
If calls to <cite>view_cube</cite> or <cite>view_nd</cite> result in windows with blank
canvases, try reducing this value.</p>
</div></blockquote>
<p><cite>envi_support_nonlowercase_params</cite> (bool, default False)</p>
<blockquote>
<div><p>By default, ENVI headers are read with parameter names converted
to lower case. If this attribute is set to True, parameters will
be read with original capitalization retained.</p>
</div></blockquote>
<p><cite>show_progress</cite> (bool, default True):</p>
<blockquote>
<div><p>Indicates whether long-running algorithms should display progress
to sys.stdout. It can be useful to set this value to False when
SPy is embedded in another application (e.g., IPython Notebook).</p>
</div></blockquote>
<p><cite>imshow_figure_size</cite> (2-tuple of integers, default <cite>None</cite>):</p>
<blockquote>
<div><p>Width and height (in inches) of windows opened with <cite>imshow</cite>. If
this value is <cite>None</cite>, matplotlib’s default size is used.</p>
</div></blockquote>
<p><cite>imshow_background_color</cite> (3-tuple of integers, default (0,0,0)):</p>
<blockquote>
<div><p>Default color to use for masked pixels in <cite>imshow</cite> displays.</p>
</div></blockquote>
<p><cite>imshow_interpolation</cite> (str, default <cite>None</cite>):</p>
<blockquote>
<div><p>Pixel interpolation to be used in imshow windows. If this value
is <cite>None</cite>, matplotlib’s default interpolation is used. Note that
zoom windows always use “nearest” interpolation.</p>
</div></blockquote>
<p><cite>imshow_stretch</cite>:</p>
<blockquote>
<div><p>Default RGB linear color stretch to perform.</p>
</div></blockquote>
<p><cite>imshow_stretch_all</cite>:</p>
<blockquote>
<div><p>If True, each color channel limits are determined independently.</p>
</div></blockquote>
<p><cite>imshow_zoom_figure_width</cite> (int, default <cite>None</cite>):</p>
<blockquote>
<div><p>Width of zoom windows opened from an imshow window. Since zoom
windows are always square, this is also the window height. If this
value is <cite>None</cite>, matplotlib’s default window size is used.</p>
</div></blockquote>
<p><cite>imshow_zoom_pixel_width</cite> (int, default 50):</p>
<blockquote>
<div><p>Number of source image pixel rows and columns to display in a
zoom window.</p>
</div></blockquote>
<p><cite>imshow_float_cmap</cite> (str, default “gray”):</p>
<blockquote>
<div><p>imshow color map to use with floating point arrays.</p>
</div></blockquote>
<p><cite>imshow_class_alpha</cite> (float, default 0.5):</p>
<blockquote>
<div><p>alpha blending value to use for imshow class overlays</p>
</div></blockquote>
<p><cite>imshow_enable_rectangle_selector</cite> (bool, default True):</p>
<blockquote>
<div><p>Whether to create the rectangle selection tool that enables
interactive image pixel class labeling. On some OS/backend
combinations, an exception may be raised when this object is
created so disabling it allows imshow windows to be created without
using the selector tool.</p>
</div></blockquote>
<p><cite>imshow_disable_mpl_callbacks</cite> (bool, default True):</p>
<blockquote>
<div><p>If True, several matplotlib keypress event callbacks will be
disabled to prevent conflicts with callbacks from SPy.  The
matplotlib callbacks can be set back to their defaults by
calling <cite>matplotlib.rcdefaults()</cite>.</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

</div>
</div>
<div class="section" id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h2>
<div class="section" id="iterator">
<h3>iterator<a class="headerlink" href="#iterator" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="spectral.algorithms.algorithms.iterator">
<code class="sig-name descname">iterator</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">mask=None</em>, <em class="sig-param">index=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spectral.algorithms.algorithms.iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator over pixels in the image.</p>
<p>Arguments:</p>
<blockquote>
<div><p><cite>image</cite> (ndarray or <code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Image</span></code>):</p>
<blockquote>
<div><p>An image over whose pixels will be iterated.</p>
</div></blockquote>
<p><cite>mask</cite> (ndarray) [default None]:</p>
<blockquote>
<div><p>An array of integers that specify over which pixels in <cite>image</cite>
iteration should be performed.</p>
</div></blockquote>
<p><cite>index</cite> (int) [default None]:</p>
<blockquote>
<div><p>Specifies which value in <cite>mask</cite> should be used for iteration.</p>
</div></blockquote>
</div></blockquote>
<p>Returns (<code class="xref py py-class docutils literal notranslate"><span class="pre">spectral.Iterator</span></code>):</p>
<blockquote>
<div><p>An iterator over image pixels.</p>
</div></blockquote>
<p>If neither <cite>mask</cite> nor <cite>index</cite> are defined, iteration is performed over all
pixels.  If <cite>mask</cite> (but not <cite>index</cite>) is defined, iteration is performed
over all pixels for which <cite>mask</cite> is nonzero.  If both <cite>mask</cite> and <cite>index</cite>
are defined, iteration is performed over all pixels <cite>image[i,j]</cite> for which
<cite>mask[i,j] == index</cite>.</p>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Class/Function Documentation</a><ul>
<li><a class="reference internal" href="#file-i-o">File I/O</a><ul>
<li><a class="reference internal" href="#open-image">open_image</a></li>
<li><a class="reference internal" href="#imagearray">ImageArray</a></li>
<li><a class="reference internal" href="#spyfile">SpyFile</a><ul>
<li><a class="reference internal" href="#spyfile-subclasses">SpyFile Subclasses</a></li>
</ul>
</li>
<li><a class="reference internal" href="#subimage">SubImage</a></li>
<li><a class="reference internal" href="#file-formats">File Formats</a><ul>
<li><a class="reference internal" href="#module-spectral.io.aviris">AVIRIS</a></li>
<li><a class="reference internal" href="#module-spectral.io.envi">ENVI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#envi-create-image">envi.create_image</a></li>
<li><a class="reference internal" href="#envi-save-classification">envi.save_classification</a></li>
<li><a class="reference internal" href="#envi-save-image">envi.save_image</a><ul>
<li><a class="reference internal" href="#erdas-lan">ERDAS/Lan</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-spectral.io.erdas">erdas.open</a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphics">Graphics</a><ul>
<li><a class="reference internal" href="#colorscale">ColorScale</a></li>
<li><a class="reference internal" href="#get-rgb">get_rgb</a></li>
<li><a class="reference internal" href="#imageview">ImageView</a></li>
<li><a class="reference internal" href="#imshow">imshow</a></li>
<li><a class="reference internal" href="#save-rgb">save_rgb</a></li>
<li><a class="reference internal" href="#view">view</a></li>
<li><a class="reference internal" href="#view-cube">view_cube</a></li>
<li><a class="reference internal" href="#view-indexed">view_indexed</a></li>
<li><a class="reference internal" href="#view-nd">view_nd</a></li>
</ul>
</li>
<li><a class="reference internal" href="#training-classes">Training Classes</a><ul>
<li><a class="reference internal" href="#create-training-classes">create_training_classes</a></li>
<li><a class="reference internal" href="#trainingclass">TrainingClass</a></li>
<li><a class="reference internal" href="#traningclassset">TraningClassSet</a></li>
</ul>
</li>
<li><a class="reference internal" href="#spectral-classes-functions">Spectral Classes/Functions</a><ul>
<li><a class="reference internal" href="#adaptive-coherence-cosine-estimator-ace">Adaptive Coherence/Cosine Estimator (ACE)</a></li>
<li><a class="reference internal" href="#asterdatabase">AsterDatabase</a></li>
<li><a class="reference internal" href="#bandinfo">BandInfo</a></li>
<li><a class="reference internal" href="#bandresampler">BandResampler</a></li>
<li><a class="reference internal" href="#bhattacharyya-distance">Bhattacharyya Distance</a></li>
<li><a class="reference internal" href="#calc-stats">calc_stats</a></li>
<li><a class="reference internal" href="#covariance">covariance</a></li>
<li><a class="reference internal" href="#cov-avg">cov_avg</a></li>
<li><a class="reference internal" href="#ecostressdatabase">EcostressDatabase</a></li>
<li><a class="reference internal" href="#fisherlineardiscriminant">FisherLinearDiscriminant</a></li>
<li><a class="reference internal" href="#gaussianclassifier">GaussianClassifier</a></li>
<li><a class="reference internal" href="#gaussianstats">GaussianStats</a></li>
<li><a class="reference internal" href="#kmeans">kmeans</a></li>
<li><a class="reference internal" href="#linear-discriminant">linear_discriminant</a></li>
<li><a class="reference internal" href="#lineartransform">LinearTransform</a></li>
<li><a class="reference internal" href="#mahalanobisdistanceclassifier">MahalanobisDistanceClassifier</a></li>
<li><a class="reference internal" href="#map-class-ids">map_class_ids</a></li>
<li><a class="reference internal" href="#map-classes">map_classes</a></li>
<li><a class="reference internal" href="#matched-filter">matched_filter</a></li>
<li><a class="reference internal" href="#matchedfilter">MatchedFilter</a></li>
<li><a class="reference internal" href="#mean-cov">mean_cov</a></li>
<li><a class="reference internal" href="#minimum-noise-fraction-mnf">Minimum Noise Fraction (MNF)</a></li>
<li><a class="reference internal" href="#msam">msam</a></li>
<li><a class="reference internal" href="#ndvi">ndvi</a></li>
<li><a class="reference internal" href="#noise-from-diffs">noise_from_diffs</a></li>
<li><a class="reference internal" href="#orthogonalize">orthogonalize</a></li>
<li><a class="reference internal" href="#perceptronclassifier">PerceptronClassifier</a></li>
<li><a class="reference internal" href="#pixel-purity-index-ppi">Pixel Purity Index (PPI)</a></li>
<li><a class="reference internal" href="#principal-components">principal_components</a></li>
<li><a class="reference internal" href="#principalcomponents">PrincipalComponents</a></li>
<li><a class="reference internal" href="#rx-anomaly-detector">RX Anomaly Detector</a></li>
<li><a class="reference internal" href="#spectral-angles">spectral_angles</a></li>
<li><a class="reference internal" href="#spectrallibrary">SpectralLibrary</a></li>
<li><a class="reference internal" href="#transform-image">transform_image</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#spysettings">SpySettings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#utilities">Utilities</a><ul>
<li><a class="reference internal" href="#iterator">iterator</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="class_func_glossary.html"
                        title="previous chapter">Class/Function Glossary</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="class_func_glossary.html" title="Class/Function Glossary"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Spectral Python 0.21 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="user_guide.html" >Spectral Python (SPy) User Guide</a> &#187;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, Thomas Boggs.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47389515-2', 'spectralpython.net');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </body>
</html>